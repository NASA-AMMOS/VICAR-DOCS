<!-- HTML generated by @(#)xref  1.15  96/02/13 on Thu May  8 14:00:41 1997 -->
<!-- Sourcefile System Disk:Installation Manual:Source:loginscript.htxr was last changed Thu May  8 13:29:32 1997 -->
<HTML>
<HEAD>
<TITLE>loginscript.html</TITLE>
</HEAD>
<BODY>

<HTML>
<HEAD>
<TITLE>VICAR Login Script Interactions</TITLE>
</HEAD>
<BODY>
<a href="referenceinfoforunix.html">[PREVIOUS]</a> <a href="index.html">[TOP]</a> <a href="defineenvironmentvariables.html">[NEXT]</a> <HR>

<H1><b>4.1</b> <a name="LoginScripts">
VICAR Interactions with Login (.cshrc) Scripts
</a></H1>

<P>We are frequently asked how to set up UNIX system and user login scripts 
so that users can start VICAR simply by typing vicar at the prompt. 
Here are some recommendations and ideas.</P>

<P>When we refer to a system login script we mean one that's centrally 
located, called by all users&acute; .cshrc login scripts. If you don&acute;t already 
have such a script, we recommend you create one. If most of your users will 
be running VICAR, put the VICAR setup commands that follow in the system 
login script. Otherwise, put them in individual users&acute; .cshrc scripts.</P>

<P>The best way to set up VICAR is to check for V2TOP&acute;s existence in the 
system or users¹ login script.  Run vicset1.csh only if V2TOP has not
been set. This is why VICAR setup is split into vicset1.csh and vicset2.csh; 
vicset1 is run only once, while vicset2 is run every time a subshell is 
created.</P>

<P>Here&acute;s part of a C shell login script that also incorporates the 
VICAR-ISIS compatibility setup. If you don&acute;t have ISIS, you can delete 
the isisset.csh or isis alias lines.</P>

<PRE>
 if ($?V2TOP == 0) then
   setenv V2TOP /usr/local/vicar/vicar1601
   source $V2TOP/vicset1.csh
   source $V2TOP/isisset.csh
endif
source $V2TOP/vicset2.csh
alias isis 'if ($?DISPLAY == 0) xterm -e idl &amp;; taetm'
</PRE>

<P>vicset1.csh adds a number of directories to the path environmental 
variable. These must be preserved. If path or other ³path-like² environmental variables such as LD_LIBRARY_PATH and XFILESEARCHPATH are set unconditionally in either the user or system log
in scripts:</P>

<PRE>
set path = (~/Perl ~/bin ~/special)
setenv LD_LIBRARY_PATH /usr/dt/lib:/usr/openwin/lib
</PRE>

<P>then directories previously added by vicset1 will disappear in a 
subshell, such as when a new window is opened. However, even if path is 
extended, rather than set unconditionally:</P>

<CODE>set path = ($path ~/Perl ~/bin ~/special)</CODE>

<P>another, though much less serious, problem is created. Every time a 
subshell is created, PATH is re-extended. This may eventually produce 
a "ridiculously long path truncated" error message when starting a 
subshell.</P>

<P>To solve both problems, we recommend that you change the users¹ and 
system login scripts so that PATH is only extended once per session. A variable used as a flag can be checked. You must have one flag variable for the system login script and another for 
a user login script if path is set in both places.</P>

<PRE>
if ($?PATHSET == 0) set path = ($path ~/Perl ~/bin ~/special)
setenv PATHSET
</PRE>

<P>You have three other choices for setting up VICAR, though the first two 
will slow down subshell creation:</P>

<OL>
<LI>Always run both vicset1.csh and vicset2.csh (and isisset.csh if 
needed) in the system login script. However you must still check all users&acute; login scripts for unconditional path setting. These scripts must be changed so that path or path-like variables 
are extended (see above).

<LI>Always run both vicset1.csh and vicset2.csh (and isisset.csh if needed) 
in the user login scripts after path, LD_LIBRARY_PATH and XFILESEARCHPATH are 
set. In this case even if the user sets the path variables unconditionally it 
won&acute;t interfere with VICAR setup. 

<LI>You can avoid all user login script modifications by creating a separate 
script to setup VICAR manually. This is the method we use at MIPS. 
For example, create a script called <CODE>/usr/local/vicar_setup</CODE>:
</OL>

<PRE>
setenv V2TOP /usr/local/vicar/vicar16
source $V2TOP/vicset1.csh
source $V2TOP/vicset2.csh
source $V2TOP/isisset.csh
</PRE>

<P>This script can be given an alias such as "vicar_setup" in the system 
login script:</P>

<KBD>>alias vicar_setup "source /usr/local/vicar_setup"</KBD>

<P>Do not use "vicar" as the alias, since that name is already aliased to 
"taetm" in vicset2.csh. Of course the user must remember to run this 
script before using VICAR.</P>

<P>This is a useful technique if you have more than one version of VICAR. 
For example, create a script called <CODE>/usr/local/vicar_setup</CODE>:</P>

<PRE>
source $V2TOP/vicset1.csh
source $V2TOP/vicset2.csh
source $V2TOP/isisset.csh
</PRE>

<P>Then create separate aliases for each version of VICAR:</P>

<PRE>
alias vicar_set16 setenv V2TOP /usr/local/vicar/vicar16; \
source /usr/local/vicar_setup&quot;
#
alias vicar_set15 setenv V2TOP /usr/local/vicar/vicar15; \
source /usr/local/vicar_setup&quot;
</PRE>

<P>Notes:</P>

<UL>
<LI>When attempting to run VICAR directly from the CD at the Brown Tutorial, 
we had to take the isisset.csh script out of the system login script. 
We&acute;re still not sure why.

<LI>If you&acute;ve installed VICAR 16 on your hard disk from a CD made before 
5/20/96, please change the first line of $V2TOP/util/remove_element.csh 
to:
</UL
<CODE>#!/bin/csh -f.</CODE>

<HR>
Next:      <a href="defineenvironmentvariables.html">Defining Environment Variables</a><BR>
Previous: <a href="referenceinfoforunix.html">Reference Information for UNIX Install</a><BR>
Top:      <a href="index.html">VICAR Installation Table of Contents</a><BR>
Updated Thu May  8 13:29:32 1997
by <a href="mailto:lkb@mipl7.jpl.nasa.gov">Larry Bolef</A>


</BODY>
</HTML>

</BODY>
</HTML>