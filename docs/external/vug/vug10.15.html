<TITLE>VICAR User's Guide - Appendix 15</TITLE>
<H2>10.15 The VICAR Interactive Session Demo</H2>

o;.i(.VICAR;Interactive Session Demo;

The VICAR Interactive Session Demo is a VICAR proc residing in one of
the VICAR libraries.  By processing a typical Voyager request, users
have an opportunity to see how VICAR really works.  A Voyager request
is broken down into the steps needed to accomplish the task, the
programs to be used, and the actual commands used to process the
data.  During the demonstration, images are displayed allowing the
users to actually see what is happening to the data. <P>

The following pages contain a listing of the instructions given to the
user by the Demo.  This listing may be used as a reference in order to
better understand what the demo is accomplishing. <P>

If you wish to run this demonstration first enter the VICAR MENU. <P>

<I>Example:</I>	Enter VICAR MENU 

<PRE>
<STRONG>VICAR&gt;</STRONG>MENU
</PRE>

The Interactive Session Demo will be found in the VICAR Sample
Procedures portion of the VICAR Menu. <P>


<H3>10.15.1   The VICAR Session Demonstration Listing</H3>

<PRE>

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
*                                                                             *
*                           W  E  L  C  O  M  E                               *
*                                                                             *
* Welcome to a demonstration of an interactive VICAR session.  You will       *
* participate by assuming the role of a VICAR user who has been given a task  *
* typical of the kind performed by scientists at JPL's Multi-Mission Image    *
* Processing Laboratory.                                                      *
*                                                                             *
* Under normal conditions, successful completion of the task would be         *
* dependent on your understanding of VICAR.  However, for training purposes,  *
* the selection of VICAR programs for you to use has been prearranged.  Each  *
* VICAR command line will have been typed in after the VICAR> prompt.  All    *
* you have to do is hit the Carriage Return and the program will execute.     *
*                                                                             *
* Realize that this session only mimics a real interactive session, and that  *
* the programs are not actually executing at all.                             *
*                                                                             *
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *


HIT CARRIAGE RETURN TO CONTINUE


* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
*                                                                             *
*                              TASK DESCRIPTION                               *
*                                                                             *
* Your mission, should you choose to accept it, is to process six individual  *
* Voyager 2 images of Jupiter.  Although the images vary in perspective, not  *
* one of them contains Jupiter's entire sphere in the field of view.          *
*                                                                             *
* Secondly, the images were acquired through different spectral filters.  Of  *
* the six frames, two were acquired through the orange filter, two through    *
* the green, and two through the violet filter.  Within each pair of          *
* spectrally like images, one contains the limb (illuminated), ie. left, side *
* of Jupiter, and the other contains the terminator (non-illuminated), ie.    *
* right, side of Jupiter.                                                     *
*                                                                             *
* The task is to mosaic together the limb and terminator images in each       *
* filter pair and display the resulting three complete spheres of Jupiter as  *
* a single color image.  The general flow of processing is described in the   *
* following sequence of steps...                                              *
*                                                                             *
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

HIT CARRIAGE RETURN TO CONTINUE

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
*                                                                             *
*                       TASK DESCRIPTION (CONTINUED)                          *
*                                                                             *
*    a) Locate the reseaus (geometry reference marks).                        *
*    b) Remove single pixel spikes.                                           *
*    c) Perform radiometric decalibration.                                    *
*    d) Remove the previously located reseaus.                                *
*    e) Perform navigational analysis (locate planet center).                 *
*    f) Perform geometric correction using navigational information.          *
*    g) Calculate and remove photometric function.                            *
*    h) Project images in a single common perspective.                        *
*    i) Fill in missing data.                                                 *
*    j) Mosaic images together to form an image of a complete sphere.         *
*    k) Repair mosaic seams.                                                  *
*    l) High-pass filter one image to be used for ratioing technique.         *
*    m) Ratio images to enhance intensities.                                  *
*    n) Perform contrast enhancement.                                         *
*    o) Rotate images to Earth orientation (vs spacecraft perspective).       *
*    p) Overlay latitude/longitude grid.                                      *
*                                                                             *
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

HIT CARRIAGE RETURN TO CONTINUE


Do you have a display device available for allocation (Y or N)?
ENTER ANSWER
->
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 1 - Use RESLOC to locate reseaus and save their locations in a file   |
|    for subsequent use by other programs.  This step must be performed for  |
|    all six cases, but we will show you only one to save time.              |
|                                                                            |
|    RESLOC (input,resfile) (output1,output2) PARMS                          |
|                                                                            |
|        Where input   = raw Voyager image                                   |
|              resfile = master Voyager reseau location file                 |
|              output1 = scene-specific reseau location file                 |
|              output2 = geometric transformation file                       |
|              PARMS   = parameters (tutor RESLOC for descriptions)          |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>RESLOC (1972833.RAW,RESJ.FIL) (1972833.RS1,1972833.RS2)
Beginning VICAR task RESLOC
Read access to Reseau file granted
FRAME    1972833 S/N=5 FILTER=3 DATE= 0/  0 REC  238
MODE=              0


HIT CARRIAGE RETURN TO CONTINUE

+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 2 - Use ADESPIKE to detect and remove single pixel spikes by          |
|    averaging adjacent pixels.  This step must be performed for all six     |
|    cases, but we will show you only one to save time.                      |
|                                                                            |
|    ADESPIKE input output PARMS                                             |
|                                                                            |
|        Where input  = raw Voyager image                                    |
|              output = input image with single pixel spikes removed         |
|              PARMS  = parameters (tutor ADESPIKE for descriptions)         |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>ADESPIKE 1972833.RAW 1972833.SPK
Beginning VICAR task ADESPIKE
ADESPIKE VERSION 3
    TOTAL NUMBER OF PIXELS CORRECTED USING ADJACENT SCAN LINE TEST            7
    TOTAL NUMBER OF PIXELS CORRECTED USING SAME SCAN LINE TEST               52


HIT CARRIAGE RETURN TO CONTINUE
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 3 - Use FICOR77 to radiometrically decalibrate the data using input   |
|    calibration files previously generated by the program MJSPFCF.  This    |
|    step must be performed for all six cases, but we will show you only one |
|    to save time.                                                           |
|                                                                            |
|    FICOR77 (input,cal,dc) output PARMS                                     |
|                                                                            |
|        Where input  = despiked Voyager image from ADESPIKE                 |
|              cal    = Voyager calibration file generated from MJSPFCF      |
|              dc     = Dark Current image acquired about same time as input |
|              output = input radiometrically decalibrated                   |
|              PARMS  = parameters (tutor FICOR77 for descriptions)          |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>FICOR77 (1972833.SPK,CAL.ORG,F1811031.J1) +
VICAR>+  1972833.FIC GAIN=0 IOF=1.0
Beginning VICAR task FICOR77
FICOR77 version 2.0
ABLE77V2 -OUTPUT FILE ERROR

Gain overridden
Dark-Current File input=
                     3
Calibration File input=
                     2
DARK-CURRENT LABEL...
          77                   800     800 800 800 L 1
          VGR-2   FDS 18110.31   PICNO 0064J2-085   SCET 79.105 23:19:08
          NA CAMERA  EXP 15360.0 MSEC  FILT 0(CLEAR )  LO GAIN  SCAN RATE  1:1
          ERT 79.105 23:58:43   1/ 1 FULL    RES   VIDICON TEMP  -79.00 DEG C
          IN/017950/05 OUT/******/**                 DSS #**   BIT SNR    7.523
           00AE5 A/C3000BC6 B/C07F C/C17F D/007F0000 ETLM/C50BA4C68068E1682811Q
          NA OPCAL 00(*****.* MSEC) PIXAVG 080/0 OPERATIONAL MODE 6(BODARK)
          CAM ECAL CYCLE BEAM  RESET OPEN  CLOSE FLOOD AEXPM  FIL G1 SHUT MODE
          NA   NO   READ  YES   NO    NO    NO    NO    NO    0 P  * NORMAL
          WA   NO   PREP  YES   YES   NO    NO    YES   NO    2 P  7 NORMAL

HIT CARRIAGE RETURN TO CONTINUE
          ADJACENT LINE PIXELS CHANGED      1. SAME LINE PIXELS CHANGED     4
          RESSAR77
          SAR               04 27 79 20:19:29          CCA31
          1 1 2 800
          SAR
          RAMSAR            04 27 79 20:20:26          CCA31
          INTER
          RAMSAR
          INSERT            04 27 79 20:31:48          CCA31
          RAMSAR            04 30 79 18:10:53          CCA31
          INTER
          RAMSAR
          INSERT            04 30 79 18:13:59          CCA31
          VGR2.NA.DC.APR16
CALIBRATION FILE LABEL...

          77                  2001    640020016400 I 2
          MJS77 PHOTOMETRIC DATA FILE     S/N=5  1 CAMERA FILTER POSITION 3
          DATE GENERATED  12/11/78  FRAMES LOW PASS FLTRD,DIV BY       9.000
          SCAN RATE= 1   GAIN =0     TEMP  0.00   DEG. C  EXPOSURE *16  MSEC
          INTAP=ISS328G  OUTAP=JS0710   FILE=12


HIT CARRIAGE RETURN TO CONTINUE
             TEMP   26/1  29/2  24/3  24/0

DIV=      .9000E+01

  CAMERA PARAMETERS...
                INPUT   DARK    CALIBRATION
                FRAME   CURRENT FILE
     S/N          5       5       5
     FILTER       3       0       3
     SCANRATE     1       1       1
     GAIN         0       0       0
     MODE       NA ONLY  BODARK
MAXL and luminances of calibration frames--
    540.00      0.00      7.94     15.88     31.75     63.50    127.00    190.00
    254.00    381.00    496.00
Exposure time=      .7200E+03

Radiance refers to solar spectrum
FtL-sec to nanowatt conv factor=
             .5021E+01
HIT CARRIAGE RETURN TO CONTINUE

Ft-L to I/F conv factor=
             .2381E+02
Scale correction factor=      0.96100003
LINE=            100
LINE=            200
LINE=            300
LINE=            400
LINE=            500
LINE=            600
LINE=            700
LINE=            800
Mean DN of DC=      .1148E+02
Minimum value of a saturated pixel=
                 32767
Maximum value of an unsaturated pixel=
                  9130
Total number of saturated pixels=
                     0
Total number of negative pixels=
                  4958
FICOR task completed


HIT CARRIAGE RETURN TO CONTINUE

+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 4 - Use RESSAR77 to remove reseaus previously located by RESLOC, as   |
|    well as major blemishes, by interpolation.  This step must be performed |
|    for all six cases, but we will show you only one to save time.          |
|                                                                            |
|    RESSAR77 (input,resfile,blemfile) output PARMS                          |
|                                                                            |
|        Where input    = radiometrically decalibrated image from FICOR77    |
|              resfile  = reseau location file from RESLOC                   |
|              blemfile = master camera blemish location file                |
|              output   = input with reseaus and blemishes removed           |
|              PARMS    = parameters (tutor RESSAR77 for descriptions)       |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>RESSAR77 (1972833.FIC,1972833.RS1,UD2:[xxx123.VGR2]BLEMLOC.NA)  +
VICAR>+  1972833.RES
Beginning VICAR task RESSAR77
TOTAL # CORRECTED PIXELS =
                 17160


HIT CARRIAGE RETURN TO CONTINUE



+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 5 - Use FARENC to calculate planet center by locating the planet limb |
|    and fitting a constrained ellipse using navigational type information.  |
|    The navigational information (planet center offset) is added to the     |
|    geometric correction information in a file to be used later by GEOMA.   |
|    This step must be performed for all six cases, but we will show you     |
|    only one to save time.                                                  |
|                                                                            |
|    FARENC (input,resfile) output PARMS                                     |
|                                                                            |
|        Where input   = radiometrically decalibrated image from FICOR77     |
|              resfile = geometric transformation file from RESLOC           |
|              output  = navigational information file                       |
|              PARMS   = parameters (tutor FARENC for descriptions)          |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>FARENC (1972833.FIC,1972833.RS2) 1972833.FAR  +
VICAR>+   SIZE=(1,1,1000,1000) GEOM=3 'AUTO AREA=(5,5,790,790) DNTH=500 BELO=500
Beginning VICAR task FARENC
input image is image space
project=VOYAGER
SYSTEM LABEL SAYS INPUT IS HALFWORD

DATA FROM SEDR ARE:
FAR=        24819735
LATI=      8.3103831
ANGLE=     161.15135
SCALE=     84.821429
FOCAL=     1503.4900
REQU=      71400.002
RPOL=      66773.002
LONG=      291.94104
SUNLAT=   0.12670947
SUNLON=    254.89175

SEMAA      366.86729
SEMIA      343.60632


HIT CARRIAGE RETURN TO CONTINUE
LIN OFSET           0.01791393
SAM OFSET           0.00611538
SUNANGLE=            261.78936

Peak DN value=            7352
ACTIVITY RESET TO         1050
BELOW RESET TO             500
DNTH RESET TO              500
AVE ACTIVITY         3709.1362
      + -            3592.3362

Initial number of points located=             1335

Points remaining after cluster rej=            739
using geoma file for distortion correction
Constrained ellipse fit object space
Line of center=       408.74149
Samp of center=       976.72528
Radial fit mean residual=      0.41968864

GENERAL ELLIPSE IMAGE SPACE
LINE   OF CENTER=    316.91834
SAMPLE OF CENTER=    800.44960
HIT CARRIAGE RETURN TO CONTINUE

CIRCLE IN IMAGE SPACE
LINE   OF CENTER=    316.91836
SAMPLE OF CENTER=    800.44958

CONSTRAINED ELLIPSE IMAGE SPACE
LINE OF CENTER  =    316.91834
SAMPLE OF CENTER=    800.44958

CONSTRAINED CIRCLE IMAGE SPACE
LINE OF CENTER=      316.91834
SAMPLE OF CENTER=    800.44958

PLANET CENTER MOVED TO LINE  =           500.00001
PLANET CENTER MOVED TO SAMPLE=           500.00001

PICTURE SHIFTED DOWN BY LINES   =        91.240601
PICTURE SHIFTED RIGHT BY SAMPLES=       -476.73139
DSRN               =                   3
#PAR WORDS PASSED         2228
ICL(1)=         2218

0GEOMA PARAMS WRITTE
HIT CARRIAGE RETURN TO CONTINUE


+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 6 - Use GEOMA to geometrically correct the image, applying planet     |
|    center offset to the center of the output.  This step must be performed |
|    for all six cases, but we will show you only one to save time.          |
|                                                                            |
|    GEOMA (input,navfile) output PARMS                                      |
|                                                                            |
|        Where input   = cleaned image from RESSAR77                         |
|              navfile = navigational information file from FARENC           |
|              output  = input geometrically corrected                       |
|              PARMS   = parameters (tutor GEOMA for descriptions)           |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>GEOMA (1972833.RES,1972833.FAR) 1972833.GEO SIZE=(1,1,1000,1000)
Beginning VICAR task GEOMA
SYSTEM LABEL SAYS INPUT IS HALFWORD


HIT CARRIAGE RETURN TO CONTINUE



+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 7 - Use PHOTFUNC to calculate and remove the photometric function,    |
|    thereby compensating for illumination differences in the scene.  This   |
|    step must be performed for all six cases, but we will show you only one |
|    to save time.                                                           |
|                                                                            |
|    PHOTFUNC input output PARMS                                             |
|                                                                            |
|        Where input  = geometrically corrected image from GEOMA             |
|              output = input with photometric function removed              |
|              PARMS  = parameters (tutor PHOTFUNC for descriptions)         |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

Beginning VICAR task PHOTFUNC
SYSTEM LABEL SAYS INPUT IS HALF
MAP2 LABELS NOT FOUND
PICTURE TYPE=                8
SSCPT=     500.00001  500.00000
FDSNO=       1972833
GEODETIC SUB S/C LAT=          8.3103828
GEOCENTRIC SUBS/C LAT=         7.2790737

C=        -.94873764 0.29140376 -.12239584 -.20229610 -.26231895 0.94353862
          0.24284393 0.91993077 0.30782171

VR=       -3127525.1   23412385  7622204.0

ME=       -.87153475 -.43683558 -.22271498 0.49010321 -.79000966 -.36835261
          -.01503747 -.43018541 0.90261536
COMMON/C8/=          500.00000  500.00000  500.00000  500.00000  84.821426
                     1503.4900  291.94101  7.2790737  161.15134   24819734

HAPKE PHOTOMETRIC FUNCTION,W= 0.990,B= -0.313,H= 0.431,C=  0.431
FAR ENCOUNTER MODE USED
LSSP,SSSP=           500.00000  500.00000
RPOLE,REQ=            66854.002  71492.002
OM=       0.86253341 -.34447318 -.37064045 -.39158359 0.00949264 -.92009357
          0.32046591 0.93874817 -.12670233
RSVE=      9199197.3   22836478  3144718.1
THRESH=            1
NUMBER OF POINTS FLAGGED=          26583


HIT CARRIAGE RETURN TO CONTINUE



+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 8 - Use HIST to calculate the dynamic range of the images generated   |
|    from PHOTFUNC, which are in halfword (16 bit) format.  This information |
|    will prove necessary in subsequent conversions to byte (8 bit) format.  |
|    This step must be performed for all six cases, but we will show you     |
|    only one to save time.                                                  |
|                                                                            |
|    HIST input PARMS                                                        |
|                                                                            |
|        Where input  = halfword formatted images from PHOTFUNC              |
|              PARMS  = parameters (tutor HIST for descriptions)             |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>HIST 1972833.PHT (213,315,474,180) 'NOHIST
Beginning VICAR task HIST
AVERAGE GRAY LEVEL=2125.226       STANDARD DEVIATION=188.8602       NUMBER ELEME
NTS=   85320.
MIN. DN=      1643
MAX. DN=      2803


HIT CARRIAGE RETURN TO CONTINUE


+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 9 - Use C to compress the dynamic range in the halfword formatted     |
|    images output from PHOTFUNC to byte range, the image format required    |
|    by PTP later in the procedure.  Rely on the information obtained from   |
|    HIST in the previous step to determine conversion limits.  This step    |
|    must be performed for all six cases, but we will show you only one to   |
|    save time.                                                              |
|                                                                            |
|    C input output PARMS                                                    |
|                                                                            |
|        Where input  = geometrically corrected image from GEOMA             |
|              output = input with photometric function removed              |
|              PARMS  = parameters (tutor C for descriptions)                |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>C 1972833.PHT 1972833.BYT IRA=(0.,5000.) ORA=(0.,255.) 'BYTE
Beginning VICAR task C

C VERSION 3

OUT = IN*     0.051+       0.5

INPUT FORMAT = HALF

OUTPUT FORMAT = BYTE

CONVERSION COMPLETE


HIT CARRIAGE RETURN TO CONTINUE


+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 10 - Use PTP to rotate the images to a common perspective,            |
|    referencing an image acquired between the acquisition times of the six  |
|    processed images.  This step must be performed for all six cases, but   |
|    we will show you only one to save time.                                 |
|                                                                            |
|    PTP input output PARMS                                                  |
|                                                                            |
|        Where input  = image from PHOTFUNC converted to byte format using C |
|              output = input rotated to same perspective as a reference     |
|              PARMS  = parameters (tutor PTP for descriptions)              |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>PTP 1972833.BYT 1972833.PTP PC=(500.0,500.0) PLANET=JUPITER  +
VICAR>+  RFRAME=1972841 RCAM=5 RPC=(500.0,500.0)
Beginning VICAR task PTP
PTP Version 2
SEDR rotation rate is 870.5360 degrees/day
***PTP task completed


HIT CARRIAGE RETURN TO CONTINUE


+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 11 - Use HIST to compute the mean DN for a common area located near   |
|    the eventual mosaic seam of the two orange filter images.  The mean     |
|    value will be used to normalize one of the orange filter images to the  |
|    other to better hide the seam when the mosaicking is performed later in |
|    the procedure.  Perform for both orange filter images.                  |
|                                                                            |
|    HIST input PARMS                                                        |
|                                                                            |
|        Where input  = an orange filter image from PTP                      |
|              PARMS  = parameters (tutor HIST for descriptions)             |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>HIST 1972833.PTP (500,200,20,20) 'NOHIST
Beginning VICAR task HIST
AVERAGE GRAY LEVEL=93.01500       STANDARD DEVIATION=5.354416       NUMBER ELEME
NTS=     400.
MIN. DN=        88
MAX. DN=       112

VICAR>HIST 1972845.PTP (500,200,20,20) 'NOHIST
Beginning VICAR task HIST
AVERAGE GRAY LEVEL=90.45000       STANDARD DEVIATION=4.406529       NUMBER ELEME
NTS=     400.
MIN. DN=        82
MAX. DN=       109

HIT CARRIAGE RETURN TO CONTINUE


+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 12 - Use F2 to execute a function that normalizes one of the orange   |
|    filter images to the other based on the difference between the mean DN  |
|    values as determined from HIST in Step 11.                              |
|                                                                            |
|    F2 input output PARMS                                                   |
|                                                                            |
|        Where input  = an orange filter image from PTP                      |
|              output = input changed in brightness by normalization factor  |
|              PARMS  = parameters (tutor F2 for descriptions)               |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>F2 1972833.PTP 1972833.NRM FUNC='IN1*0.9677419'
Beginning VICAR task F2
   LOAD   1
   MUL   21
   RETN   0
F2 using byte table lookup
FUNCTION EVALUATED       256 TIMES


HIT CARRIAGE RETURN TO CONTINUE


+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 13 - Use COPY to subsection the normalized orange filter image and    |
|    the referenced orange filter image to cut away anomalies in scene       |
|    brightness located near the eventual mosaic seam.  The anomalies are    |
|    due to deficiencies in modelling the photometric function.              |
|                                                                            |
|    COPY input output PARMS                                                 |
|                                                                            |
|        Where input  = an orange filter image                               |
|              output = subsectioned area of input                           |
|              PARMS  = parameters (tutor COPY for descriptions)             |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>COPY 1972833.NRM 1972833.SUB (191,1,809,220)
Beginning VICAR task COPY


VICAR>COPY 1972845.PTP 1972845.SUB (191,1,809,1000)
Beginning VICAR task COPY


HIT CARRIAGE RETURN TO CONTINUE


+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 14 - Use FASTMOS to mosaic together the limb and terminator images    |
|    for each of the three spectral filters.  This step must be performed    |
|    for all three cases, but we will show you only one to save time.        |
|                                                                            |
|    FASTMOS (input1,input2) output PARMS                                    |
|                                                                            |
|        Where input1 = limb image from filter X                             |
|              input2 = terminator image from filter X                       |
|              output = mosaic of the two inputs                             |
|              PARMS  = parameters (tutor FASTMOS for descriptions)          |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

Beginning VICAR task FASTMOS


HIT CARRIAGE RETURN TO CONTINUE


+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 15 - Use HIST to compute the mean DN for the same area in both the    |
|    orange and green filter images.  The area should be located adjacent to |
|    the upper edge of the orange image.  The mean DN values will be used to |
|    rescale green filter image data, using it to fill in the void in the    |
|    orange image.                                                           |
|                                                                            |
|    HIST input PARMS                                                        |
|                                                                            |
|        Where input  = mosaicked green or orange filter image               |
|              PARMS  = parameters (tutor HIST for descriptions)             |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>HIST RED.MOS (195,455,30,30) 'NOHIST
Beginning VICAR task HIST
AVERAGE GRAY LEVEL=97.45667       STANDARD DEVIATION=2.439333       NUMBER ELEME
NTS=     900.
MIN. DN=        92
MAX. DN=       106


VICAR>HIST GRN.MOS (195,455,30,30) 'NOHIST
Beginning VICAR task HIST
AVERAGE GRAY LEVEL=94.59000       STANDARD DEVIATION=2.707953       NUMBER ELEME
NTS=     900.
MIN. DN=        83
MAX. DN=       103


HIT CARRIAGE RETURN TO CONTINUE



+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 16 - Use F2 to execute a function that adds the orange and green      |
|    images together so that the void in the orange filter image is filled   |
|    in with rescaled green filter data.  The function only adds the         |
|    rescaled green filter data where DN=0 in the orange filter image.       |
|                                                                            |
|    F2 (input1,input2) output PARMS                                         |
|                                                                            |
|        Where input1 = mosaicked orange filter image                        |
|              input2 = mosaicked green filter image                         |
|              output = void in orange image filled with green image data    |
|              PARMS  = parameters (tutor F2 for descriptions)               |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>F2 (RED.MOS,GRN.MOS) RED.FIL  +
VICAR>+  FUNC='(IN1+((1.030235*IN2)*(IN1 .EQ. 0)))'
Beginning VICAR task F2
   LOAD  21
   MUL    2
   STOR  62
   LOAD   1
   EQ    22
   STOR  64
   LOAD  62
   MUL   64
   STOR  66
   LOAD   1
   ADD   66
   RETN   0
F2 using byte table lookup
FUNCTION EVALUATED     65536 TIMES


HIT CARRIAGE RETURN TO CONTINUE


+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 17 - Use TFILT to high-pass filter the green filter image for         |
|    enhancement of detail.  The enhanced green filter image will be used    |
|    in ratioing operations in Steps 18 and 19.                              |
|                                                                            |
|    TFILT input output PARMS                                                |
|                                                                            |
|        Where input  = mosaicked green filter image                         |
|              output = input with high frequency data (detail) enhanced     |
|              PARMS  = parameters (tutor TFILT for descriptions)            |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>TFILT (GRN.MOS,SCX2:TEMP) GRN.IMG 'HIGH THRESH=1 NLW=50 NSW=50
  IF ($COUNT(NOAP)=1) GOTO NO_AP
  LOCAL IN1 STRING INITIAL="
  LOCAL FLAG INTEGER INITIAL=0
  LOCAL NLI  INTEGER INITIAL=0
  LET IN1=INP(1)
  APFLAG INP=@IN1 FLAG=@FLAG NLI=@NLI
Beginning VICAR task APFLAG
AP is not available

  IF (FLAG=0 OR NLI>9000) GOTO NO_AP
 GOTO NO_AP
    TFILT0 INP=@INP OUT=@OUT SIZE=@SIZE SL=@SL SS=@SS NL=@NL NS=@NS  +
     NLW=@NLW NSW=@NSW THRESH=@THRESH FILTER=@FILTER SCALE=@SCALE  +
     DCTRAN=@DCTRAN BOOST=@BOOST DCLEVEL=@DCLEVEL OFFSET=@OFFSET
Beginning VICAR task TFILT0
#BYTES/PXL=              1
NLW=             51
NSW=             51
END-PROC


HIT CARRIAGE RETURN TO CONTINUE


+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 18 - Use F2 to execute a function that ratios the orange and the      |
|    high-pass filtered green images for intensity enhancement.              |
|                                                                            |
|    F2 (input1,input2) output PARMS                                         |
|                                                                            |
|        Where input1 = filled orange image                                  |
|              input2 = high-pass filtered green image                       |
|              output = ratioed orange image                                 |
|              PARMS  = parameters (tutor F2 for descriptions)               |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>F2 (RED.FIL,BLU.MOS,GRN.IMG) RED.IMG  +
VICAR>+  FUNC='(IN1/IN2)*IN3'
Beginning VICAR task F2
   LOAD   1
   DIV    2
   MUL    3
   RETN   0
F2 calculating every pixel
FUNCTION EVALUATED   1000000 TIMES


HIT CARRIAGE RETURN TO CONTINUE



+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 19 - Use F2 to execute a function that ratios the violet and the      |
|    high-pass filtered green images, using the latter as the intensity      |
|    image.                                                                  |
|                                                                            |
|    F2 (input1,input2) output PARMS                                         |
|                                                                            |
|        Where input1 = mosaicked violet image                               |
|              input2 = high-pass filtered green image                       |
|              output = ratioed violet image                                 |
|              PARMS  = parameters (tutor F2 for descriptions)               |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>F2 (RED.FIL,BLU.MOS,GRN.IMG) BLU.IMG  +
VICAR>+  FUNC='(IN2/IN1)*IN3'
Beginning VICAR task F2
   LOAD   2
   DIV    1
   MUL    3
   RETN   0
F2 calculating every pixel
FUNCTION EVALUATED   1000000 TIMES


HIT CARRIAGE RETURN TO CONTINUE


+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 20 - Use ROTATE to rotate the intensity enhanced images to 0 degrees  |
|    North, so that the top of the images are oriented to Earth's polar      |
|    North.  This step must be performed for all three cases, but we will    |
|    show you only one to save time.                                         |
|                                                                            |
|    ROTATE input output PARMS                                               |
|                                                                            |
|        Where input  = intensity enhanced image                             |
|              output = input oriented to North azimuth                      |
|              PARMS  = parameters (tutor ROTATE for descriptions)           |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>ROTATE RED.STR RED.ROT ANGLE=-160.724
ROTATE2 INP=@INP PDS=ZZPAR SIZE=@SIZE   SL=@SL  SS=@SS  NL=@NL  NS=@NS   +
        ANGLE=@ANGLE    NOINTERP=@NOINTERP       +
        LINE=@LINE      SAMPLE=@SAMPLE  CENTER=@CENTER
Beginning VICAR task ROTATE2
REGION (   1,    1, 1000, 1000) OF THE INPUT PICTURE IS ROTATED  -160.72 DEGREES
 ABOUT 500.5 , 500.5
THE CENTER OF ROTATION IN THE OUTPUT PICTURE IS LOCATED AT PIXEL      500.5,   5
00.5
IF ($COUNT(OUT) = 0) RETURN
IF ((ANGLE < 60) AND (ANGLE > -60))
  ELSE
    LGEOM INP=RED.STR OUT=RED.ROT SIZE=@SIZE+
 NL=@NL NS=@NS          IDSNAM=@IDSNAM IDSNS=@IDSNS PARMS=ZZPAR
Beginning VICAR task LGEOM
END-IF
END-PROC


HIT CARRIAGE RETURN TO CONTINUE


+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 21 - Use STRETCH to perform a Gaussian mapping operation on the       |
|    dynamic ranges of the three rotated images.  This step must be          |
|    for all three cases, but we will show you only one to save time.        |
|                                                                            |
|    STRETCH input output PARMS                                              |
|                                                                            |
|        Where input  = rotated image from ROTATE                            |
|              output = input contrast enhanced                              |
|              PARMS  = parameters (tutor STRETCH for descriptions)          |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +

VICAR>STRETCH RED.ROT RED.STR 'GAUS GSIG=4.
Beginning VICAR task STRETCH
HISTOGRAM BEFORE EXCLUSION . . .
MEAN  =  .5498E+02
SIGMA =  .7405E+02
DN VALUE      0 EXCLUDED
DN VALUE    255 EXCLUDED
HISTOGRAM AFTER EXCLUSION . . .
MEAN  =  .1503E+03
SIGMA =  .1892E+02
*** GAUSS OPTION ***
GAUSSIAN STRETCH: GSIGMA =   4.00
 T R A N S F O R M A T I O N
IN         0       1       2       3       4       5       6       7       8
   9      10      11      12      13      14
OUT        0      11      15      17      19      20      21      21      22
  23      23      24      24      24      25
IN        15      16      17      18      19      20      21      22      23
  24      25      26      27      28      29
OUT       25      25      25      26      26      27      27      27      28
  28      28      29      29      29      29


HIT CARRIAGE RETURN TO CONTINUE
IN        30      31      32      33      34      35      36      37      38
  39      40      41      42      43      44
OUT       30      30      30      30      30      31      31      31      31
  31      31      31      32      32      32
IN        45      46      47      48      49      50      51      52      53
  54      55      56      57      58      59
OUT       32      32      32      32      32      33      33      33      33
  33      33      33      34      34      34
IN        60      61      62      63      64      65      66      67      68
  69      70      71      72      73      74
OUT       34      34      35      35      35      35      35      35      35
  36      36      36      36      36      37
IN        75      76      77      78      79      80      81      82      83
  84      85      86      87      88      89
OUT       37      37      37      37      38      38      38      38      39
  39      39      39      39      40      40
IN        90      91      92      93      94      95      96      97      98
  99     100     101     102     103     104
OUT       40      40      41      41      41      42      42      42      43
  43      44      44      45      46      46

HIT CARRIAGE RETURN TO CONTINUE
IN       105     106     107     108     109     110     111     112     113
 114     115     116     117     118     119
OUT       47      48      49      50      51      53      54      55      56
  58      59      61      63      65      68
IN       120     121     122     123     124     125     126     127     128
 129     130     131     132     133     134
OUT       70      72      74      76      78      80      81      83      85
  87      88      90      92      93      95
IN       135     136     137     138     139     140     141     142     143
 144     145     146     147     148     149
OUT       97      99     100     102     104     106     108     111     113
 115     118     120     122     125     127
IN       150     151     152     153     154     155     156     157     158
 159     160     161     162     163     164
OUT      130     132     134     137     139     141     143     145     147
 149     151     153     154     156     157
IN       165     166     167     168     169     170     171     172     173
 174     175     176     177     178     179
OUT      159     160     162     163     165     166     168     169     170
 172     173     174     175     177     178

HIT CARRIAGE RETURN TO CONTINUE
IN       180     181     182     183     184     185     186     187     188
 189     190     191     192     193     194
OUT      179     180     181     182     183     184     185     186     186
 187     188     189     190     190     191
IN       195     196     197     198     199     200     201     202     203
 204     205     206     207     208     209
OUT      192     193     194     194     195     196     197     198     199
 200     201     202     203     204     205
IN       210     211     212     213     214     215     216     217     218
 219     220     221     222     223     224
OUT      206     207     208     208     209     209     210     210     211
 211     211     212     212     212     212
IN       225     226     227     228     229     230     231     232     233
 234     235     236     237     238     239
OUT      213     213     213     214     214     214     215     215     215
 216     216     217     217     218     219
IN       240     241     242     243     244     245     246     247     248
 249     250     251     252     253     254
OUT      220     220     221     222     223     224     225     226     228
 229     231     233     237     242     255
IN       255
OUT        0
HIT CARRIAGE RETURN TO CONTINUE



+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +
|                                                                            |
| STEP 22 - Use OVERLAY to overlay a latitude/longitude grid on the          |
|    contrast enhanced images.  This step must be performed for all three    |
|    cases, but we will show you only one to save time.                      |
|                                                                            |
|    OVERLAY input output PARMS                                              |
|                                                                            |
|        Where input  = contrast enhanced image from STRETCH                 |
|              output = input overlayed with lat/long grid                   |
|              PARMS  = parameters (tutor OVERLAY for descriptions)          |
|                                                                            |
+ -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- +


VICAR>OVERLAY RED.STR RED.GRD DN=WHITE FOCL=1503.49 TARGET=JUPITER  +

Beginning VICAR task OVERLAY
OVERLAY version 2.0
Input is in byte data format
MAP2 LABELS NOT FOUND
Label says mission is Voyager

C=        -.94657058 -.20412575 0.24967355 0.29784715 -.25648731 0.91951144
          -.12365787 0.94474703 0.30358160

ME=       -.83647829 -.48914608 -.24706309 0.54779369 -.75873357 -.35248467
          -.01503856 -.43018535 0.90261531
Far encounter mode used
NAVIGATION DATA FOR FRAME 1972841
Image has been geometrically corrected
Target body                       JUPITER
Equatorial radius (km)             71492.0
Polar radius (km)                  66854.0
Spacecraft range (km)               24816560
Spacecraft position (lat,lon)     (  8.31, 295.81)
Planet center (line,sample)       (   500.00,   500.00)
HIT CARRIAGE RETURN TO CONTINUE
North Angle (measured from up)       0.00
Camera Serial Number                     5
Focal length (mm)                 1503.490
Optical axis (line,sample)        ( 500.0, 500.0)
Scale (pixels/mm at focal plane)   84.8214
All latitudes are planetocentric
All longitudes are west
Scale(deg/pixel) =            0.15550621
Number of points used =            16845
MAP001=MAP2 LABEL GENERATED BY MAPLAB SUBROUTINE
MAP002= RADII=( 71492.0, 71492.0, 66854.0),LORANGLE= 0.0
MAP003=*** OBJECT SPACE ***
MAP004=S/C LAT=  8.31 S/C LONG=295.81,S/C LINE=  500.00,S/C SAMPLE=  500.00
MAP005=RANGE=24816560.0,FOCAL=1503.49 PIXEL/MM= 84.8214,NORTH ANGLE=  0.000
MAP006= OPTICAL AXIS LINE 500.00,SAMPLE= 500.00
OVERLAY task completed


HIT CARRIAGE RETURN TO CONTINUE


* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
*                                                                             *
*                       C O N G R A T U L A T I O N S                         *
*                                                                             *
* This marks the end of the task.  You have done well.  Although the task was *
* somewhat lengthy as an example, it illustrates the flexibilities of VICAR   *
* in performing various image processing techniques.                          *
*                                                                             *
* We hope that this session enlightened you to some of the many possibilities *
* in image processing available through the use of VICAR.                     *
*                                                                             *
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *


Press RETURN key for menu
</PRE>

.i).VICAR;Interactive Session Demo;
.i.Continuation Line#(See Line Continuation);
.i.Cosmic#(See Document Acquisition);
.i.Entering VICAR#(See VICAR Entering);
.i.Error Handling:Message#(See Messages);
.i.Exiting VICAR#(See VICAR Exiting);
.i.Files#(See Datasets);
.i.Labels:#(See VICAR Labels);
.i.NUT#(See New User's Tutorial);
.i.PDF#(See Proc Definition File);
.i.Portability#(See Transportation);
.i.TCL#(See TAE, Command Language);

<HR>
<A HREF="vug10.14.html"><IMG SRC="back.gif"></A>
<A HREF="vug11.html"><IMG SRC="fwd.gif"></A>
<P> 

If you wish to return to the Contents page, click <A
HREF="vugfinal.html#Contents">here</A>.
