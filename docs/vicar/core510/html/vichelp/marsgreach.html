<HTML>
<HEAD><title>HTML Help for MARSGREACH</title></HEAD>
<BODY>
<H1>Help for MARSGREACH</H1>
<pre>
PURPOSE:

This program generates an overall goodness product by looking at the 
reachability <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#bands">bands</A> of selected instruments in the input reachability file.

This program is not specific to any project; however, some assumptions 
are made on the input reachability product. Read the METHOD section.

EXECUTION:

marsgreach <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#inp">inp</A>=data.reach <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#out">out</A>=data.goodness
where:
data.reach is an input 6-band reachability image file.
data.goodness is a 1 or 2 band image file of type BYTE.


METHOD:

This program generates an overall goodness product by looking at the 
reachability <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#bands">bands</A> in the input reachability file.  This is not an M2020
specific program; however, the output of M20REACH for M2020 project is a 
good example of input to MARSGREACH.

The reachability input is a single multi-band file in HALF (16-bit int) 
format.  Each band has reachability information for one instrument on the
mechanical arm of the rover.  The instruments gone through reachability 
analysis should be listed in the label INSTRUMENT_BAND_ID of the input file.  
In the case of M2020 for example, they are, in order:

Band	Instrument
----	----------
  1	DRILL
  2	GDRT
  3	SHERLOC_WATSON
  4	SHERLOC
  5	PIXL
  6     FCS

For each instrument band in the input file, a pixel is a 16-bit integer 
containing the instrument target reachability information associated with 
the pixel.  A 16-bit reachability pixel for an instrument is divided into 8
groups of 2 bits for 8 arm configurations.  Therefore, 2 bits are used in the
input file per instrument per target pixel per arm configuration to record the 
measure of the reachability of the instrument to the target with the given arm 
configuration.  With two bits, the reachability measure can only be on the
scale of 0 to 3 with 0 being not reachable and 3 being the best reachability
expected.  For example, in the case of a reachability input generated by
M2020, the reachability measures and what they mean are the following:

Decimal	Binary	Description
-------	------	-----------
  0	  00	not reachable
  1	  01	standoff reachable
  2	  10	close (0cm) reachable 
  3	  11	standoff and close reachable (best)

MARSGREACH assumes an instrument band pixel is a 16-bit integer divided into
eight groups of two bits, hence it assumes eight arm configurations.  For a
concrete example, in the case of M2020 the bit allocations for the eight 
possible arm configurations are given in the table below:

Bit Numbers	Configuration
-----------	-------------
15-14		Shoulder <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#out">Out</A>, Elbow Up, Wrist Up
13-12		Shoulder <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#out">Out</A>, Elbow Up, Wrist Down
11-10		Shoulder <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#out">Out</A>, Elbow Down, Wrist Up
9-8		Shoulder <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#out">Out</A>, Elbow Down, Wrist Down
7-6		Shoulder In, Elbow Up, Wrist Up
5-4		Shoulder In, Elbow Up, Wrist Down
3-2		Shoulder In, Elbow Down, Wrist Up
1-0		Shoulder In, Elbow Down, Wrist Down

CONFIGURATION_BIT_ID label in the input file should give a list of the arm
configurations listed from left (most significant bits here) to right (least
significant bits here).

MARSGREACH goes through the following conceptual steps to generate its 
output:

First, MARSGREACH ignores all the input <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#bands">bands</A> that are not selected through
<A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#bands">BANDS</A> parameter.

Second, MARSGREACH collapses the selected input <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#bands">bands</A> into a single band with
the same number of lines, the same number of samples-per-line and the same 
format (HALF) as the input <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#bands">bands</A>.  In the resulting band, the two bits
associated with a given target pixel and a given arm configuration is 
set to the smallest (worst reachability) value from the same target pixel
and the same arm configuration 2-bit values across all the selected input 
<A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#bands">bands</A>.

Third, MARSGREACH takes the conceptual product of the second step and 
generates another conceptual band.  This new band also has the same number
of lines and the same number of samples-per-line as the result of the 
second step; however, the result of the third step is in BYTE format.  In
the product of the third step, each pixel is treated as a single value, and 
it is set to the largest (best reachability) of the 8 2-bit values from the 
same target pixel of the result of the second step.

Fourth, MARSGREACH generates the goodness single band image that is the 
required band in its output product.  In this step, the program maps every 
pixel value from the product of the third step to one of the "standard 
goodness values".  The table below shows the mapping in decimal:

Reachability Values (Decimal)     Goodness Values (Decimal)
-----------------------------     -------------------------
0                                 0
1                                 1
2                                 3
3                                 5

Fifth, MARSGREACH generates an optional second output band if <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#best_conf">BEST_CONF</A> 
keyword is set.  This optional output band has the same number of lines, the 
same number of samples-per-line and the same format (BYTE) as the first 
output band (the product of the fourth step).  However, in the second
optional output band, each pixel (8-bits) is not treated as a single value
but as 8 1-bit flags one per each arm configuration.  For this step, the
program depends on the results of the second and the third steps.  For a 
given pixel and arm configuration, if the 2-bit reachability value for the arm 
configuration from the result of the second step is equal to the pixel value 
from the result of the third step, then the bit in the same pixel of the 
second optional output band for the arm configuration is set to 1 otherwise, 
it is set to 0.  There is one exception to this flag setting rule.  If the 
pixel value in the product of the third step is zero, then all flags in the
same pixel of the optional second band are set to 0 rather than 1.  The 
purpose of the second output band is to flag the arm configurations for a 
target pixel that their reachability values are equal to the best conservative 
reachability value determined in the third step.


OUTPUT FILE FORMATS:

The output of MARSGREACH has one or two <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#bands">bands</A>.  The second band is optional
and both <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#bands">bands</A> have BYTE format.  The number of the lines and the number of
the samples-per-line of both <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#bands">bands</A> are the same as the number of the lines 
and the number of the samples-per-line in the input file.

The required first band is the product of the fourth step explained in the 
METHOD section, and the optional second band is the product of the fifth 
step explained in the METHOD section.  The second band is created if the
optional <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#best_conf">BEST_CONF</A> keyword is set.

HISTORY:
2020-09-24 Initial marsgreach by E. Sarkissian,

</pre>
<hr>
<H2>PARAMETERS:</H2>
<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#inp"><H3>INP</H3></A>
Input reachability file.
Must be 1 filename.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#out"><H3>OUT</H3></A>
Output file.
Must be 1 filename.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#bands"><H3>BANDS</H3></A>
Selected band numbers
from the input file.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#best_conf"><H3>BEST_CONF</H3></A>
Set this keyword to
produce the second
output band.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#navtable"><H3>NAVTABLE</H3></A>
Corrected navigation
filename.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#config_path"><H3>CONFIG_PATH</H3></A>
Path used to find
configuration/calibration
files.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#point_method"><H3>POINT_METHOD</H3></A>
Specifies a mission-
specific pointing
method to use

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#nosite"><H3>NOSITE</H3></A>
Disables coordinate
system sites.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#rsf"><H3>RSF</H3></A>
Rover State File(s) to use.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#debug_rsf"><H3>DEBUG_RSF</H3></A>
Turns on debugging of <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#rsf">RSF</A>
parameter.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#coord"><H3>COORD</H3></A>
Coordinate system to use.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#coord_index"><H3>COORD_INDEX</H3></A>
Coordinate system index for
some <A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#coord">COORD</A>/mission combos.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#fixed_site"><H3>FIXED_SITE</H3></A>
Which site is FIXED for
rover missions.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#solution_id"><H3>SOLUTION_ID</H3></A>
Solution ID to use for
<A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#coord_index">COORD_INDEX</A>

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#data_set_name"><H3>DATA_SET_NAME</H3></A>
Specifies the full name given
to a data set or a data product.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#data_set_id"><H3>DATA_SET_ID</H3></A>
Specifies a unique alphanumeric
identifier for a data set or data
product.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#release_id"><H3>RELEASE_ID</H3></A>
Specifies the unique identifier
associated with the release to the
public of all or part of a data set.
The release number is associated with
the data set, not the mission.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#product_id"><H3>PRODUCT_ID</H3></A>
Specifies a permanent, unique
identifier assigned to a data
product by its producer.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#producer_id"><H3>PRODUCER_ID</H3></A>
Specifies the unique identifier
of an entity associated with the
production a data set.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#producer_inst"><H3>PRODUCER_INST</H3></A>
Specifies the full name of the
identity of an entity associated
with the production of a data set.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#target_name"><H3>TARGET_NAME</H3></A>
Specifies a target.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach_level2.html#target_type"><H3>TARGET_TYPE</H3></A>
Specifies the type of a named target.

<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach.html#examples"><H4>See Examples:</H4></A>
<HR><A HREF="/VICAR-DOCS/vicar/core510/html/vichelp/marsgreach.html#CogProg"><H4>Cognizant Programmer:</H4></A>
</BODY>
</HTML>
