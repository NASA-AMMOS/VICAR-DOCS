<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>

<title>jpl.mipl.pgs.ms</title>
<meta name="date" content="2018-06-21">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript">
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>

<div class="topNav"><a name="navbar.top">

</a>
<div class="skipNav"><a href="/VICAR-DOCS/vicar/core470/html/javadoc/jpl/mipl/pgs/ms/#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">

</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="/VICAR-DOCS/vicar/core470/html/javadoc/jpl/mipl/pgs/ms/package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../jpl/mipl/pgs/jbpm/util/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../jpl/mipl/pgs/perstore/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?jpl/mipl/pgs/ms/package-summary.html" target="_top">Frames</a></li>
<li><a href="/VICAR-DOCS/vicar/core470/html/javadoc/jpl/mipl/pgs/ms/package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript">
</script>
</div>
<a name="skip.navbar.top">

</a></div>

<div class="header">
<h1 title="Package" class="title">Package&nbsp;jpl.mipl.pgs.ms</h1>
<div class="docSummary">
<div class="block">This package contains the messaging classes and servers of the
<b>P</b>
roduct
<b>G</b>
eneration
<b>S</b>
ubsystem (PGS).</div>
</div>
<p>See:&nbsp;<a href="/VICAR-DOCS/vicar/core470/html/javadoc/jpl/mipl/pgs/ms/#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../jpl/mipl/pgs/ms/MessageListener.html" title="interface in jpl.mipl.pgs.ms">MessageListener</a></td>
<td class="colLast">
<div class="block">This interface is a listener for messages from JMS.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../jpl/mipl/pgs/ms/JmsBroker.html" title="class in jpl.mipl.pgs.ms">JmsBroker</a></td>
<td class="colLast">
<div class="block">This class is an abstract class for JMS broker.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../jpl/mipl/pgs/ms/JmsBrokerActiveMq.html" title="class in jpl.mipl.pgs.ms">JmsBrokerActiveMq</a></td>
<td class="colLast">
<div class="block">This class is an implementation of <a href="../../../../jpl/mipl/pgs/ms/JmsBroker.html" title="class in jpl.mipl.pgs.ms"><code>JmsBroker</code></a> class using ActiveMQ.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../jpl/mipl/pgs/ms/JmsBrokerFactory.html" title="class in jpl.mipl.pgs.ms">JmsBrokerFactory</a></td>
<td class="colLast">
<div class="block">This class is a factory class that keeps an instance of JmsBroker class.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../jpl/mipl/pgs/ms/JmsConfiguration.html" title="class in jpl.mipl.pgs.ms">JmsConfiguration</a></td>
<td class="colLast">
<div class="block">This class contains system properties for JMS related configurations.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../jpl/mipl/pgs/ms/MessageUtil.html" title="class in jpl.mipl.pgs.ms">MessageUtil</a></td>
<td class="colLast">
<div class="block">This class is an utility class to deal with messaging capabilities.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../jpl/mipl/pgs/ms/TopicClient.html" title="class in jpl.mipl.pgs.ms">TopicClient</a></td>
<td class="colLast">
<div class="block">This class is an abstract class representing JMS client that deals with
 JMS topic.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../jpl/mipl/pgs/ms/TopicPublisher.html" title="class in jpl.mipl.pgs.ms">TopicPublisher</a></td>
<td class="colLast">
<div class="block">This class represents a publisher that deals with JMS topic.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../jpl/mipl/pgs/ms/TopicSubscriber.html" title="class in jpl.mipl.pgs.ms">TopicSubscriber</a></td>
<td class="colLast">
<div class="block">This class represents a subscriber that deals with JMS topic.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Enum Summary table, listing enums, and an explanation">
<caption><span>Enum Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Enum</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../jpl/mipl/pgs/ms/JmsConfiguration.Property.html" title="enum in jpl.mipl.pgs.ms">JmsConfiguration.Property</a></td>
<td class="colLast">
<div class="block">Contains properties that can be set for JMS related configurations.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">

</a>
<h2 title="Package jpl.mipl.pgs.ms Description">Package jpl.mipl.pgs.ms Description</h2>
<div class="block">This package contains the messaging classes and servers of the
<b>P</b>
roduct
<b>G</b>
eneration
<b>S</b>
ubsystem (PGS).
<br><br>
<h2>Start Messaging Service</h2>
<p>
In order to utilize the messaging service, it has be started. MessageUtil class provides methods to start and stop the service. Following code demonstrates how to start the service.
</p>
<pre>
// set system properties used for messaging service

// this property is used to tell which JMS implementation to use.
System.setProperty(
    JmsConfiguration.Property.InitialContextFactory.getName(),
    "org.apache.activemq.jndi.ActiveMQInitialContextFactory"
);

// this property is used to specify a provider URL for the messaging service.
// the url should look like: "tcp://localhost:60606".
System.setProperty(
    JmsConfiguration.Property.BrokerProviderUrl.getName(),
    "tcp://localhost:61616"
);

// this property is used to specify a broker name. This can be anything.
System.setProperty(
    JmsConfiguration.Property.BrokerName.getName(),
    "Matis Broker"
);

// this property is used to specify a directory that will be used to message storage.
// it needs to be a path to a directory.
System.setProperty(
    JmsConfiguration.Property.BrokerDataDirectory.getName(),
    "Matis/Data"
);

// start jms broker
MessageUtil.startServer();
</pre>
<p>
As shown above, there are several system properties that the messaging service look up when it starts up.
</p>
<br>

<h2>Send Messages</h2>
<p>
Once the messaging service is started, now messages can be sent. Following code demonstrates how to send a message using the messaging service.
</p>
<pre>
// create a publisher
TopicPublisher topicPublisher = new TopicPublisher("tcp://localhost:61616", "MyTopic");

// create a message to send
Hashtable message = new Hashtable();

// send the message
topicPublisher.publish(message);
</pre>
<p>
As shown above, the TopicPublisher class takes a provider URL and topic name as its parameters for its constructor. The provider URL should points to where the messaging service started os that the publisher can reach the messaging service to send a message. The topic name is needed to tell which topic this message should be sent to.
<br><br>
A message is a Hashtable object. The message should contain name-value pairs that describe the message content.
<br><br>
Note that the TopicPublisher class has a method called close. A call to the method ensures that all resources allocated for the TopicPublisher object to be freed.
</p>
<br>

<h2>Receive Messages</h2>
<p>
Receiving a message follows an event-driven approach. TopicSubscriber class requires two parameters which are the same as what were required for TopicPublisher: a provider URL and a topic name. The provider URL tells which URL to receive messages from, and the topic name specifies which topic to check for the messages.
<br><br>
In order to handle received messages, the TopicSubscriber class requires an implementation of MessageListener interface to be added to the TopicSubscriber object. Everytime the TopicSubscriber object receives a message, an appropriate method defined in the MessageListener interface will be called with a message object. The implementor of the interface provides how to handle with the message. Following demonstrates how to receive messages.
</p>
<pre>
// create a subscriber
TopicSubscriber topicSubscriber = new TopicSubscriber("tcp://localhost:61616", "MyTopic");

// add a message listener
topicSubscriber.addMessageListener(new MessageListener(){
    public void consumeMessage(Hashtable message)
    {
        // write how to handle the message
    }
});
</pre>
<p>
A message is a Hashtable object, which is the same object that the publisher sent.
<br><br>
Note that the TopicSubscriber class has a method called close. A call to the method ensures that all resources allocated for the TopicSubscriber object to be freed.
</p>
<br>

<h2>Stop Messaging Service</h2>
<p>
The messasing service is needed to be stopped at the end of use of the service. Following code demonstrates how to stop the messaging service.
</p>
<pre>
// stop the messaging service
MessageUtil.stopServer();
</pre></div>
</div>

<div class="bottomNav"><a name="navbar.bottom">

</a>
<div class="skipNav"><a href="/VICAR-DOCS/vicar/core470/html/javadoc/jpl/mipl/pgs/ms/#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">

</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="/VICAR-DOCS/vicar/core470/html/javadoc/jpl/mipl/pgs/ms/package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../jpl/mipl/pgs/jbpm/util/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../jpl/mipl/pgs/perstore/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?jpl/mipl/pgs/ms/package-summary.html" target="_top">Frames</a></li>
<li><a href="/VICAR-DOCS/vicar/core470/html/javadoc/jpl/mipl/pgs/ms/package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript">
</script>
</div>
<a name="skip.navbar.bottom">

</a></div>

</body>
</html>
