<HTML>
<HEAD><title>HTML Level 2 Help for MARSNAV</title></HEAD>
<BODY>
<H1>Level 2 Help for <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav.html">MARSNAV</A></H1>
<A NAME="inp"><H3>INP</H3></A>
<pre>
There are two options for describing input images. 

Either:
List the image file names 

Or:
provide an ascii file with the file names listed, one per record.

Note that normally only the label is used from the input images.  They
are typically image files for convenience and compatibility with marstie et al.
However, Dynamic XYZ tiepoints require the corresponding input file to be an
XYZ image.

<p>
<p></pre>


<hr>
<A NAME="out"><H3>OUT</H3></A><pre>
Output navigation table, containing the updated pointing and <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> model
information.  It should also contain rover localization if used, but this is
not yet implemented.

This is either an XML file, or an ASCII table, depending on the value of
<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#format">FORMAT</A>.

<p>
<p></pre>


<hr>
<A NAME="in_tpt"><H3>IN_TPT</H3></A><pre>
The input tiepoint file, as generated by MARSTIE (or a previous run of
MARSNAV).  This file must be specified.  It can be in either the old text
<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#format">format</A>, or the new XML format (it detects this automatically).

<p>
<p></pre>


<hr>
<A NAME="out_tpt"><H3>OUT_TPT</H3></A><pre>
The output tiepoint file, which holds changes to the tiepoints made by either
batch or interactive editing modes of MARSNAV.  This file is always written
in the new XML tiepoint <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#format">format</A>.  It can be converted to the old format using
marstie.

<p>
<p></pre>


<hr>
<A NAME="navtable"><H3>NAVTABLE</H3></A><pre>
The optional input navigation table.  If provided, this allows the user to
provide an initial nav solution, which is then tweaked by the marsnav process.
This allows a pointing solution created by other means, (such as MICA) or via
an earlier marsnav run, to be adjusted.  This may be used to better globally
distribute <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#error">error</A> or accomodate new tiepoints, among other things.

Note that there is no guarantee the result will bear any resemblance to the
input nav file.  It is merely a starting point, and marsnav may go off in a
completely different direction.

<p>
<p></pre>


<hr>
<A NAME="format"><H3>FORMAT</H3></A><pre>
The output <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#format">format</A> of navigation file.
If <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#format">format</A>=TXT, then the output is an ASCII table with a header,
then one record per input picture giving:
Number of Parameters (N), N Original Parameters, N Corrected Parameters
If images come from different instruments, the number of pointing parameters
may be different for each one.  The parameters are often 2 (Azimuth, Elevation)
but that depends on the instrument.  See the Pig documentation.

If <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#format">format</A>=XML, then the output is a xml file in following format:
&lt?xml version="1.0" encoding="UTF-8"?&gt
&ltpointing_correction ...&gt
   ...
  &ltpriority&gt
    &ltentry <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#solution_id">solution_id</A>=.../&gt 
  &lt/priority&gt
  &ltsolution ...&gt
    &ltimage filter=... frame_id=... image_id=... instrument=...&gt
       &ltoriginal_parameters type=...&gt
         &ltparameter id=... value=.../&gt
       &lt/original_parameters&gt
    &lt/image&gt
    &ltpointing_parameters type=...&gt
       &ltparameter id=... value=.../&gt
    &lt/pointing_parameters&gt
    &ltcamera_model type=...&gt
       &ltparameter id=... type=... value=.../&gt
       ...
       &ltreference_frame name=... index=.../&gt
    &lt/camera_model&gt
  &lt/solution&gt
  ...
&lt/pointing_correction&gt

<p>
<p></pre>


<hr>
<A NAME="out_solution_id"><H3>OUT_SOLUTION_ID</H3></A><pre>
Solution id for the OUTPUT navigation file in XML <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#format">format</A>.
If solution id is missing when <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#format">FORMAT</A>=XML, then the output
navigation file can not be created (therefore the parameter is required).

<p>
<p></pre>


<hr>
<A NAME="solution_id"><H3>SOLUTION_ID</H3></A><pre>
Specifies which solution ID to use for the INPUT nav file (if present).

There are potentially many different definitions for the same coordinate
system. These are identified via a unique Solution ID.  If this parameter
is given, only the specified solution's definition is searched for.  Normally
it is not used.

<p>
<p></pre>


<hr>
<A NAME="interact"><H3>INTERACT</H3></A><pre>
Controls whether tiepoint editing (performed when a residual is &gt <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#error">ERROR</A>) is
performed interactively or automatically.  See the METHOD section of the
program help.

<p>
<p></pre>


<hr>
<A NAME="refimage"><H3>REFIMAGE</H3></A><pre>
Specifies which image (if any) are reference images.

Reference images are assumed to be correctly navigated and will not be
adjusted (but see <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#adjref">ADJREF</A>).

Defaults to the image with the greatest number of connected images once
tiepoints have been culled to one per pair.

<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#refimage">REFIMAGE</A>=-1 means no reference image.

EFIMAGE can be a single image, or a list of images.  Each image in the
list will be a reference image.  (see also <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#until">UNTIL</A>).  This allows any arbitrary
images to be selected as references.  If an image number is negative, it
means all images from the previous number through (the absolute value of)
this one will be references.  For example a list:

1,3,-6,8,11,-15

will cause the following images to be reference imgaes:

1,3,4,5,6,8,11,12,13,14,15

Numbering of images starts at 1.

<p>
<p></pre>


<hr>
<A NAME="until"><H3>UNTIL</H3></A><pre>
Means that all images from 1 to the first value of <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#refimage">REFIMAGE</A> inclusive are
treated as reference images.  The pointing of these will not change.  Any
additional images listed in <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#refimage">REFIMAGE</A> will also be reference images.

The functionality of this parameter has been subsumed by the negative number
feature of <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#refimage">REFIMAGE</A>.  For example, REF=5 -<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#until">UNTIL</A> is the same as REF=\(1,-5\).

<p>
<p></pre>


<hr>
<A NAME="adjref"><H3>ADJREF</H3></A><pre>
If given <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#adjref">ADJREF</A> specifies how many parameters to keep constant for reference
images.  Parameters beyond <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#adjref">ADJREF</A> get adjusted even if the image is a reference
image.  This allows, for example, twist to be adjusted even when the locations
are fixed (MER 3dof pointing model).

Parameter numbers are 1-based.

<p>
<p></pre>


<hr>
<A NAME="ignore"><H3>IGNORE</H3></A><pre>
Specifies a list of images that will be ignored.  Tiepoints containing this
image will be ignored and excluded from consideration (but see <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#ignore_intra">IGNORE_INTRA</A>).
This has two purposes.  First, for very large tiepoint files, when adjusting
only a few images (via <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#refimage">REFIMAGE</A>), the presence of spurious tiepoints can be a
significant performance drain.  Second, this allows you to exclude a tiepoint
that is known to be problematic.  This might occur, for example, when matching
a foreground mastcam image to a background navcam image - even though the
foreground to background connections are correct, they may pull the foreground
solution <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#out">out</A> of alignment.

Ignored tiepoints still appear in the output tiepoint file (if one is written).

Ignored images should always be reference images (although this is not checked
nor enforced).  A non-reference (active) image cannot be adjusted if all
tiepoints containing that image are removed.

Like <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#refimage">REFIMAGE</A>, <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#ignore">IGNORE</A> accepts negative numbers to indicate ranges.  So a value
of 4,-7 means 4,5,6,7 are all ignored.  See <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#refimage">REFIMAGE</A> for more examples.

<p>
<p></pre>


<hr>
<A NAME="ignore_intra"><H3>IGNORE_INTRA</H3></A><pre>
This flag causes all tiepoints between non-reference (active) images to be
ignored.  Only tiepoints between non-reference and reference images will be
considered.

The use case for this is as follows:  Say you are insetting images (e.g.
mastcam on MSL) into a background (e.g. navcam) mosaic that has already been
tiepointed and nav'd.  You want to coregister the images to the background.
This flag allows you to use autotie to get a complete set of tiepoints but
then only use the ones tying the foreground to the background.  This is
beneficial because the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#normal">normal</A> autotie modes will create many more overlap
ties than full-image ties, making the overlap ties overwhelm the full-image
ties.  Since you want the full-image ties, this flag lets you <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#ignore">ignore</A> the
overlap ties.

<p>
<p></pre>


<hr>
<A NAME="error"><H3>ERROR</H3></A><pre>
The final pixel tiepoint residual <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#error">error</A> that is permitted. Points 
exceeding this residual are candidates for removal in batch mode
(potentially after recycles), or will be edited if the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#interact">INTERACT</A> mode
is used.  Default is 0.1 pixels, which makes sense only with -noremove.
A value like 7 (the old default) would be better in removal mode.

<p>
<p></pre>


<hr>
<A NAME="recycle"><H3>RECYCLE</H3></A><pre>
This parameter is only used in batch mode (not interactive), when a tiepoint's
residual exceeds <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#error">ERROR</A>.  <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#recycle">RECYCLE</A> specifies the number of times to re-run the
solution, starting where the previous one ended, before deleting the offending
point.  Once a point is deleted, the solution is re-started at its initial
conditions, with a potential for <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#recycle">RECYCLE</A> more reruns <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#until">until</A> the residual is
acceptable.

<p>
<p></pre>


<hr>
<A NAME="mintie"><H3>MINTIE</H3></A><pre>
Specifies the minimum number of tiepoints for an image.  If at the end of
the run, an image has fewer than <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#mintie">MINTIE</A> tiepoints still active, it is reset
to its initial conditions - the adjustments are ignored.  This is to prevent
uncontrolled drift when there are no tiepoints.  <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#inertia">INERTIA</A> is supposed to fix
this, but has been shown to be ineffective in some cases.

Caution should be exercised with this, as if there is a systematic motion of
nearby frames, the frames with too few tiepoints will not participate in this
systematic motion.

This is not exactly the same as setting the image to be a reference image,
because the few tiepoints that DO exist do still pull on their partners.  This
could cause them to get pulled <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#out">out</A> of position, potentially.  Generally there
should be enough other tiepoints to mitigate this.

The default is 0, which disables all resetting.  Suggested values are 1
(reset those with just one tiepoint) or 4 (enough to overconstrain a solution
so it doesn't rotate and scale uncontrollably, as could happen with 2 or 3).

<p>
<p></pre>


<hr>
<A NAME="ftol"><H3>FTOL</H3></A><pre>
Tolerance value for amoeba.  Specifies how accurate the answer should be.
(more precisely, amoeba terminates when the amount of change in the cost
function is less than this amount).  Larger numbers can greatly speed up
runtime.  For marsnav, values of .001 are probably sufficient for most
cases, but this has not been rigorously tested.  The default is .0001.

Default is pretty arbitrary but seems to work well...
<p>
<p></pre>


<hr>
<A NAME="do_pointing"><H3>DO_POINTING</H3></A><pre>
This keyword specifies whether or not pointing should be adjusted.  It defaults
to on.  You may wish to turn off pointing correction if you were only
interested in a <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> model or localization adjustment.  Note that a nav
file is still written even if NO_POINTING is on; it simply specifies no
adjustment.

<p>
<p></pre>


<hr>
<A NAME="do_surface"><H3>DO_SURFACE</H3></A><pre>
This keyword specifies whether or not the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> model should be adjusted.
It defaults to off (NO_SURFACE).  Allowing the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> model adjust can be
helpful for unusual situations, such as MER-MI mosaics or the inside of the
MER-B landing crater.  If you turn on <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> model adjustment, you should
have a good number of very high-quality tiepoints, that are well distributed
over the image overlaps.

Note that the resulting <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> model is not written to a file anywhere; the
results are simply printed to the stdout log.  This happens at each iteration,
as well as again at the end of the program.  For convenience, they are
printed <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#out">out</A> in a form that can be easily cut-and-pasted into other programs'
command lines.

The <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> model will be printed <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#out">out</A> at the end of the run in both the frame
specified by <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surf_coord">SURF_COORD</A>, and (if different) the one specified in <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#coord">COORD</A>.  This
allows for example the ROVER frame to be used for adjustment, but the SITE
frame used for specifying the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> to later programs.

<p>
<p></pre>


<hr>
<A NAME="do_location"><H3>DO_LOCATION</H3></A><pre>
Specifies which rover locations are to be adjusted.  This changes the XYZ
location of the rover only; it does NOT adjust the rover orientation (see
<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#do_orientation">DO_ORIENTATION</A>).

When marsnav runs, it prints <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#out">out</A> a list of all sites used by the input files.
Note that a "site" in this sense is any rover position, NOT just formally a
Site frame.  This list is indexed by a single number (counting 0 to n).
<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#do_location">DO_LOCATION</A> is a list of these numbers specifying which of the locations to
adjust.  These are not Site indexes (e.g. as defined by MER); they are
indexes into the printed-<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#out">out</A> table.  Note that this means you must normally
run marsnav once to get this table printed, kill it, and rerun with
<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#do_location">DO_LOCATION</A> specified.

For example, if the following is printed:

List of Sites used by input files:
  Site 0,'MER_ROVER: (11,55,73,367,167)',count=9. Adj loc=0,ori=0. match loc=-1,ori=-1
  Site 1,'MER_ROVER: (11,55,111,396,291)',count=7. Adj loc=0,ori=0. match loc=-1,ori=-1
  Site 2,'MER_ROVER: (11,55,119,403,291)',count=23. Adj loc=0,ori=0. match loc=-1,ori=-1
  Site 3,'MER_ROVER: (11,59,0,0,0)',count=42. Adj loc=0,ori=0. match loc=-1,ori=-1

it says that 9 images use the "MER_ROVER: (11,55,73,367,167)" position, which
is called 0 in marsnav.  42 use "MER_ROVER: (11,59,0,0,0)", which is called
3, and so on.  If you wanted to adjust the last two locations, you would give
<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#do_location">DO_LOCATION</A>=(2,3).  Check to make sure the appropriate "adj loc" values change
to 1.

<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#ignore">Ignore</A> match loc at the moment.  Eventually the plan is to allow sites to
be glued together such that one value changes both, but this is not yet
implemented.

*IMPORTANT*  The results of the localization are printed to stdout, as
with <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#do_surface">DO_SURFACE</A>.  These results are NOT written into an RMC file.  They
should be, but implementation time during ops did not allow for this.  So,
you must create an RMC file by hand, and cut-and-paste the printed values
into it.  The XYZ and quaternion are conveniently formatted for cut-and-paste
into an RMC file.

Note:  in some cases you may want to take the resulting XYZ value and use
it as a Site vector (SVF file) rather than a Rover vector (RVF).  However,
any simultaneous adjustment of positions within the same site would have to
be adjusted to account for the site offset.  Position 0 is by definition at
offset (0,0,0) to the Site, so any adjustment of Position 0 really needs to
be a Site update.  But that adjustment would not be reflected in the other
positions within the site so the value would have to be subtracted from the
other calculated positions in order to maintain consistency.

Note that <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#do_location">DO_LOCATION</A> cannot be used with <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#omp_on">OMP_ON</A>.

<p>
<p></pre>


<hr>
<A NAME="do_orientation"><H3>DO_ORIENTATION</H3></A><pre>
Specifies which rover orientations are to be adjusted.  This changes the
Euler angles (and thus the quaternion) of the rover only; it does NOT
adjust the rover location (see <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#do_location">DO_LOCATION</A>).

When marsnav runs, it prints <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#out">out</A> a list of all sites used by the input files.
Note that a "site" in this sense is any rover position, NOT just formally a
Site frame.  This list is indexed by a single number (counting 0 to n).
<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#do_orientation">DO_ORIENTATION</A> is a list of these numbers specifying which of the orientations
to adjust.  These are not Site indexes (e.g. as defined by MER); they are
indexes into the printed-<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#out">out</A> table.  Note that this means you must normally
run marsnav once to get this table printed, kill it, and rerun with
<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#do_orientation">DO_ORIENTATION</A> specified.

For example, if the following is printed:

List of Sites used by input files:
  Site 0,'MER_ROVER: (11,55,73,367,167)',count=9. Adj loc=0,ori=0. match loc=-1,ori=-1
  Site 1,'MER_ROVER: (11,55,111,396,291)',count=7. Adj loc=0,ori=0. match loc=-1,ori=-1
  Site 2,'MER_ROVER: (11,55,119,403,291)',count=23. Adj loc=0,ori=0. match loc=-1,ori=-1
  Site 3,'MER_ROVER: (11,59,0,0,0)',count=42. Adj loc=0,ori=0. match loc=-1,ori=-1

it says that 9 images use the "MER_ROVER: (11,55,73,367,167)" position, which
is called 0 in marsnav.  42 use "MER_ROVER: (11,59,0,0,0)", which is called
3, and so on.  If you wanted to adjust the second and fourth orientations,
you would give DO_ORIENTATIONS=(1,3).  Check to make sure the appropriate
"adj ori" values change to 1.

<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#ignore">Ignore</A> match ori at the moment.  Eventually the plan is to allow sites to
be glued together such that one value changes both, but this is not yet
implemented.

*IMPORTANT*  The results of the localization are printed to stdout, as
with <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#do_surface">DO_SURFACE</A>.  These results are NOT written into an RMC file.  They
should be, but implementation time during ops did not allow for this.  So,
you must create an RMC file by hand, and cut-and-paste the printed values
into it.  The XYZ and quaternion are conveniently formatted for cut-and-paste
into an RMC file.

Note that <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#do_orientation">DO_ORIENTATION</A> cannot be used with <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#omp_on">OMP_ON</A>.

<p>
<p></pre>


<hr>
<A NAME="remove"><H3>REMOVE</H3></A><pre>
If NOREMOVE is specified, the program will not <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#remove">remove</A> the worst tiepoint
in batch mode.  Instead, when recycles are exhausted, it will simply exit
with the current solution.  The default is NOREMOVE.

This mode can be helpful when adjusting a <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> model, or when all tiepoints
are known to be good.

<p>
<p></pre>


<hr>
<A NAME="max_residual"><H3>MAX_RESIDUAL</H3></A><pre>
Specifies a threshold for residuals.  Any tiepoint above this residual will be
removed during the editing process.

<p>
<p></pre>


<hr>
<A NAME="max_remove"><H3>MAX_REMOVE</H3></A><pre>
Specifies a maximum number of loops for the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#remove">remove</A>-tiepoint process.
When tiepoints are removed, the whole solution is restarted from the
beginning (so as to not be influenced by the now-gone tiepoints).  If
<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#max_remove">MAX_REMOVE</A> is specified, it sets a limit on the number of times this
restart can happen, independent of whether the other loop termination
criteria (<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#error">error</A> or max residual) are reached.

<p>
<p></pre>


<hr>
<A NAME="inertia"><H3>INERTIA</H3></A><pre>
The <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#inertia">INERTIA</A> parameter modifies the residual used for function minimiziation
by adding a factor that makes the images tend to stay in place.  For each
pointing parameter, the difference between the original value of the pointing
parameter and the current value is multiplied by the corresponding <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#inertia">INERTIA</A>
value, and the result is added to the residual.  Each pointing parameter can
have a different value for <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#inertia">INERTIA</A>.  The result of this is that, depending on
the weight imparted by <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#inertia">INERTIA</A>, images will tend to stay where they are,
adjusting less in response to tiepoints than they otherwise would.  This has
the beneficial effect of preventing "drift" of the entire solution.  For
example, for a typical cylindrical projection, you can add some value to all
of the azuimuths and not affect the residual at all.  The solution could thus
"random walk" around in azimuth, giving incorrect results.  <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#inertia">INERTIA</A> can prevent
that by introducing an <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#error">error</A> term whenever the azimuth moves.

Selecting an appropriate value for <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#inertia">INERTIA</A> is a dicey proposition.  The unit
of the residual is a distance in pixel space, squared.  Pointing parameters
can be any unit, but are typically in degrees.  Thus the units for <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#inertia">INERTIA</A>
itself are typically pixels^2/degree.  It is best selected by trial and <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#error">error</A>.
Experience has shown that values in the range of 5 to 20 are appropriate for
MER pointing parameters (coincidentally enough, both for mast camera angles
and for MI joint angles).  Note that it is not uncommon to have different
<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#inertia">inertia</A> values for each pointing parameter.  An INERTIA of (5,20,10) might
be useful for the right side of a stereo mosaic.  The 20 weights elevation
changes heavily, which tends to reduce vertical disparity.  The weights for
azimuth and twist are less, allowing them to change more.

Note that <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#inertia">INERTIA</A> applies only to image pointing parameters.  Pointing
parameters relating to <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> models or rover localizations do not participate
in any <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#inertia">INERTIA</A>.

<p>
<p></pre>


<hr>
<A NAME="start_key"><H3>START_KEY</H3></A><pre>
Starting key number for the tiepoint file (XML <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#format">format</A> only).  Tiepoint files
contain a list of images, each of which is associated with an integer key.
Setting <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#start_key">START_KEY</A> to some value allows tiepoint files to be merged easily,
without the keys conflicting.  It is acceptable to have the same image in
different sections of a merged file (with different keys); they are properly
merged when read in.

<p>
<p></pre>


<hr>
<A NAME="trad_mode"><H3>TRAD_MODE</H3></A><pre>
This keyword determines the type of <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#error">error</A> values used by amoeba when
correcting pointing parameters. TRADITIONAL uses line/sample space
tiepoint differences. MISS_DISTANCE uses the minimum distance between
the projected rays in XYZ space, scaled by the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#miss_mult">MISS_MULT</A> parm value.
BOTH sums the two errors, with the miss distance <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#error">error</A> scaled by
multiplying with <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#miss_mult">MISS_MULT</A>. The default is TRADITIONAL.

<p>
<p></pre>


<hr>
<A NAME="miss_mult"><H3>MISS_MULT</H3></A><pre>
This real-valued parameter is used as a scale multiplier for the miss
distance in miss-distance tiepoints.  The default value is 333.3.  The xyz
errors are scaled to control the relative strengths of xyz and pixel
space errors when both errors are combined, for example when mixing
Traditional and Miss Distance tiepoints, or when using Traditional
tiepoints with <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#trad_mode">TRAD_MODE</A>=BOTH.

<p>
<p></pre>


<hr>
<A NAME="parallel_limit"><H3>PARALLEL_LIMIT</H3></A><pre>
When using miss-distance tiepoints, it is possible to get tiepoints whose
rays are very close to parallel (e.g. distant tiepoints, near the horizon).
Miss distance becomes very sensitive to noise when the rays are very close
to parallel.  This parameter sets a limit on how close to parallel rays can
be and still be considered; those tiepoints that exceed this threshold are
ignored.  The value is specified as the dot product of the two vectors, in
other words the cosine of the angle between them.  The default is 0.9999.

<p>
<p></pre>


<hr>
<A NAME="range_miss"><H3>RANGE_MISS</H3></A><pre>
Specifies whether or not to scale miss-distance tiepoints by their range.
Scaling causes nearby points to "count" more, on the theory that they are
more accurate (because farther points' rays become closer to parallel and
are thus more susceptible to noise).  In addition, the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#error">error</A> of one far-away
point can swamp a bunch of nearby points if not scaled by range.  This is
off by default, i.e. errors are not scaled by range.

<p>
<p></pre>


<hr>
<A NAME="omp_on"><H3>OMP_ON</H3></A><pre>
Turns on or off parallel processing using OMP, which uses multiple cores on
a single host machine.  The default is on.  The main help describes some
environment variables that can further control parallel processing.  Note
that this program uses standard OpenMP (which is built in to the gcc/g+ compilers), so further details can be found in the OpenMP documentation.

<p>
<p></pre>


<hr>
<A NAME="par_degree"><H3>PAR_DEGREE</H3></A><pre>
Overrides the degree of parallelism used, which affects how the pamoeba
algorithm behaves but also affects how many parallel threads are used.
A value of 1 is (almost) equivalent to the serial amoeba algorithm.  See the
main help for details.

<p>
<p></pre>


<hr>
<A NAME="normal"><H3>NORMAL</H3></A><pre>
The local <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#normal">normal</A> vector in the coordinate system specified by
<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surf_coord">SURF_COORD</A> (defaults to <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> fixed).

For most pan/tilt cameras, if the lander is not tilted this vector
would be: <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#normal">normal</A>=(0,0,-1).  ie: x_component=0, y_component=0, z_component=-1.
This need not be a unit vector.  This vector is used to define the
<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> plane to which image points are projected in order to minimize
parallax.
For SPHERE1/2 <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> models, <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#normal">normal</A>'s first parameter is used to
denote sphere's radius.  Thus to describe sphere of radius R, user
would specify <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#normal">normal</A>=(R, 0, 0).

<p>
<p></pre>


<hr>
<A NAME="ground"><H3>GROUND</H3></A><pre>
Any point on the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A>, in the coordinate system specified by <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surf_coord">SURF_COORD</A>
(defaults to <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> fixed).  This defines where the tilted plane is in
space.  Although any point may be used, normally the point just "under" the
origin is selected.
Defaults:
Mars Pathfinder:  (0.0, 0.0, 0.0)       (lander zero point is on the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#ground">ground</A>)
Mars 98 Lander:   (0.0, 0.0, 1.64)      (lander zero point is on top of deck)
MER           :   (0.0, 0.0, 0.294)
For MER images taken on top of the lander, the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#ground">ground</A> is roughly at (0.0, 0.0, 0.7)
For SPHERE1/2 <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> models, <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#ground">GROUND</A> parameter is used to denote sphere's
center.

<p>
<p></pre>


<hr>
<A NAME="surf_coord"><H3>SURF_COORD</H3></A><pre>
The coordinate system that <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> parameters like <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#ground">GROUND</A> and <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#normal">NORMAL</A> are
defined in.  For valid values refer to <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#coord">COORD</A> parameter description.  The
interpretation of the values is dependent on the mission.  Defaults to
<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> fixed coordinate system.

Note that no validation is done for input strings because <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#coord">COORD</A> is using
the same values.  So the user needs to be extra careful in specifying
<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surf_coord">SURF_COORD</A> values.  For example <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#coord">COORD</A>=local would be correctly interpreted
to mean LOCAL_LEVEL because of the validation process.  On the other hand
specifying <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surf_coord">SURF_COORD</A>=local would lead to underlying code treating the input
value as invalid and reverting to default which is FIXED frame.  So the
values for <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surf_coord">SURF_COORD</A> should be spelled exactly as found in the list of
valid values for the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#coord">COORD</A> parameter.

<p>
<p></pre>


<hr>
<A NAME="surface"><H3>SURFACE</H3></A><pre>
The type of mars <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> to use. The surface is used to intercept view rays
emanating from the cameras in order to model <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#out">out</A> parallax between the
stereo cameras. The options are <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A>=INFINITY which means no surface
is used, <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A>=PLANE (the default case). If surface = PLANE then the plane
is defined by the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#normal">NORMAL</A> and <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#ground">GROUND</A> parameters.  For the cases when PLANE 
doesn't match local topography sufficiently well, here are two sphere <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A>
models: <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A>=SPHERE1 and surface=SPHERE2.  SPHERE1 is useful to model
convex surfaces like hills, it returns closest(first) ray-<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> intersection 
point.  SPHERE2 is useful to model concave surfaces, like crater when the
camera point is outside looking in, it returns farthest(second) ray-<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> 
intersection point.  For the case when camera is inside the sphere <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A>, 
like rover sitting in the crater, there is only a single intersection point
and SPHERE1 and SPHERE2 behave exactly the same. Last, MESH is a <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A>
model defined by a mesh file (.obj) which path is given with <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surf_mesh">SURF_MESH</A>.

<p>
<p></pre>


<hr>
<A NAME="surf_mesh"><H3>SURF_MESH</H3></A><pre>
Mesh OBJ file to use as the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> model. For the mesh to be used,
<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">SURFACE</A> must be set to MESH. The coordinates of the mesh vertices can be 
expressed in any CS. However the mesh CS must be supplied via <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surf_csfile">SURF_CSFILE</A>.
If <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surf_csfile">SURF_CSFILE</A> is not used, then the mesh is assumed to be to the CS that
results from <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#coord">COORD</A> or <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surf_coord">SURF_COORD</A>

VARI <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surf_csfile">SURF_CSFILE</A> 
File name of a vicar file whose CS (contained in the labels) will be read and
assigned to the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">SURFACE</A> model. The type of image and its content are of no
interest, we are just reading the CS. That CS will supersede any other <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> 
CS definition (<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#coord">COORD</A> or <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surf_coord">SURF_COORD</A>). Its typical use is to supply a CS to a
given mesh file (expectedly the XYZ from which the mesh is computed from, but
doesn't have to). But <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surf_csfile">SURF_CSFILE</A> could be use to define a CS in which <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#normal">NORMAL</A> 
and <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#ground">GROUND</A> for a PLANE <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> are expressed in.

<p>
<p></pre>


<hr>
<A NAME="config_path"><H3>CONFIG_PATH</H3></A><pre>
A colon-separated list of directories in which to look for configuration
and calibration files.  Environment variables are allowed in the list
(and may themselves contain colon-separated lists).  The directories are
searched in order for each config/cal file when it is loaded.  This allows
multiple projectes to be supported simultaneously, and allows the user to
override any given config/cal file.  Note that the directory structure below
the directories specified in this path must match what the project expects.
For example, Mars 98 expects flat fields to be in a subdirectory named
"flat_fields" while Mars Pathfinder expects them to be directly in the
directory specified by the path (i.e. no intermediate subdirectories).

<p>
<p></pre>


<hr>
<A NAME="point_method"><H3>POINT_METHOD</H3></A><pre>
Specifies a mission-specific pointing method to use.  Normally this
parameter is not used, in which case the "default" pointing methods
are used.  Some missions may have special, or alternate, pointing
methods available, which are indicated by this string (for example,
backlash models, using arm joint angles instead of x/y/z/az/el, etc).
A substring search is used, so multiple methods (where that makes sense)
can be specified by separating the keywords with commas.

Note that nav files created using one pointing method will most likely
not be compatible with a mosaic created using a different pointing method.

The methods available vary per mission, but some methods available at
the time of this writing are:

BACKLASH : Mars 98 SSI only.  Selects a backlash pointing model,
which adjusts the telemetered azimuth and elevation values based on
knowledge of the camera's mechanical backlash and the direction the
motor was travelling when the image was taken.

<p>
<p></pre>


<hr>
<A NAME="match_method"><H3>MATCH_METHOD</H3></A><pre>
Specifies a method for reading the nav file.

Loose method matches with pointing parameters of the image.
Tight method matches with unique id of the image.

Applies only to an input nav file, if given (not to the output nav file).

<p>
<p></pre>


<hr>
<A NAME="match_tol"><H3>MATCH_TOL</H3></A><pre>
Tolerance value for matching pointing parameters in the pointing corrections file.
Used if <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#match_method">MATCH_METHOD</A>=LOOSE
Default value is pretty arbitrary, though seems to work well so far....

<p>
<p></pre>


<hr>
<A NAME="nosite"><H3>NOSITE</H3></A><pre>
Disables all label-derived parameters to the Site mechanism which underlies
coordinate systems.  This forces all sites to be identical, with all rotations
and offsets set the same.  In the case of MPF or Mars 98, this disables
the lander quaternion and offset (sets them to identity and 0, respectively).
This option should not be used with images taken from different vantage
points (e.g. the spacecraft moved, or mixing a lander and a rover) or
invalid results will be obtained.  The use of this option invalidates the
Fixed coordinate frame; any values reported in the Fixed frame will not
correctly reflect the orientation of the lander/rover.

Obviously, this option should be rarely used; it is intended for when the
image labels defining the site are invalid or inconsistent.

<p>
<p></pre>


<hr>
<A NAME="rsf"><H3>RSF</H3></A><pre>
Rover State File.  This is a list of filenames to load containing
Rover State information.  These files contain position and orientation
information for a rover (or other mobile spacecraft) at various sites.
They are in XML <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#format">format</A>.  See the "Rover Motion Counter (RMC) Master File SIS"
for details on these files.

Rover State Files have a priority order.  The files listed first have
the highest priority.

Environment variables may be used in the list.

For MER, if a directory is specified, then that directory is searched for
RMC Master files and any found are loaded.  The directory structure and
filename convention is covered in the RMC SIS.  The directory specified
is the one containing "master", so if &ltdir&gt is the name specified in the
<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#rsf">RSF</A> parameter, the following files will be searched for:

&ltdir&gt/master/<mission>_Master.svf
&ltdir&gt/master/<mission>_Site_<n>_Master.rvf

The name of each file loaded is printed to the stdout log for reference.

<p>
<p></pre>


<hr>
<A NAME="debug_rsf"><H3>DEBUG_RSF</H3></A><pre>
If enabled, this causes the internal database of RMC locations to be
printed <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#out">out</A> to the stdout log.  This is after the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#rsf">RSF</A> files have been
loaded and the coordinate systems read from the input label(s).

<p>
<p></pre>


<hr>
<A NAME="coord"><H3>COORD</H3></A><pre>
This parameter is ignored by marsnav, except for one place.  It is
here for compatibility with subroutines used by other programs (see
e.g. marsmap).

If <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#do_surface">DO_SURFACE</A> is specified, then the final <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> model is printed <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#out">out</A>
in the coordinate system specified by <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#coord">COORD</A> as well as <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surf_coord">SURF_COORD</A>.  This
allows for example the input <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> to be specified in ROVER frame, and
ROVER frame will be used to adjust it.  But the final <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">surface</A> will be
printed in both ROVER and SITE frames.  This allows the SITE frame value
to be used in subsequent steps, which more closely follows <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#normal">normal</A> practice.

<p>
<p></pre>


<hr>
<A NAME="coord_index"><H3>COORD_INDEX</H3></A><pre>
This parameter is ignored by marsnav (except in one case; see <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#coord">COORD</A>).  It
is here for compatibility with subroutines used by other programs (see
e.g. marsmap).

<p>
<p></pre>


<hr>
<A NAME="fixed_site"><H3>FIXED_SITE</H3></A><pre>
Specifies which major Site is the "Fixed" Site for this run.

Historically, MPF and M98 had a single "<A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#surface">Surface</A> Fixed" frame which never
moved, and which all other coordinate system frames were referenced to.
With the advent of long-range rovers (such as MER and FIDO), that became
insufficient.  The rover traverses far enough that errors in knowledge of
coordinate system offset and orientation become unacceptable.

For this reason, a system of major Sites was introduced.  Periodically
during the mission, a Site frame is declared.  This then becomes the
reference frame for all activities <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#until">until</A> the next Site is declared.
References are kept local, and errors don't propogate across Sites.

However, if images from more than one Site are combined together, the
Site's must be placed relative to each other.  Therefore a single reference
frame is still needed to combine different sites.

The <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#fixed_site">FIXED_SITE</A> parameter controls which of the major Site frames is
the reference ("fixed") site for this program run.  This fixed frame
can vary in different program runs, but is constant throughout one
execution.

If not specified, <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#fixed_site">FIXED_SITE</A> defaults to the minimum Site number (i.e.
lowest numbered, or earliest chronologically) used in all input images.
Normally this default is sufficient; rarely must <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#fixed_site">FIXED_SITE</A> be specified.

One or more Rover State Files must usually be specified in order to combine
image from more than one Site.  These describe the relationship between
sites.  See the <A HREF="/VICAR-DOCS/vicar/coredev/html/vichelp/marsnav_level2.html#rsf">RSF</A> parameter.

<p>
<p></pre>

</BODY>
</HTML>
