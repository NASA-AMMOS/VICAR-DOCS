<HTML>
<HEAD><title>HTML Help for MARSAUTOTIE</title></HEAD>
<BODY>
<H1>Help for MARSAUTOTIE</H1>
<pre>
PURPOSE:
-------

To automatically gather tiepoints for a set of overlapping images.
The resulting tiepoints are output in <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">OUT</A> for use by other programs
such as MARSNAV, or for manual refinement via MARSTIE.

MARSAUTOTIE supports any mission, instrument, and camera model supported
by the Planetary Image Geometry (Pig) software suite.  However, the
parameters are likely to be camera-specific, so much tuning may be
required.


EXECUTION:
---------

There are two ways to present input images:

marsautotie <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#inp">inp</A>=(a.img,b.img,c.img,...) <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A>=tiepoints.tpt
or
marstie <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#inp">inp</A>=ascii_listoffiles out_tpt=tiepoints.tpt

where ascii_listoffiles is a text file containing the list of filenames
to include in the mosaic, one per record.  Up to 200 input images can be
listed.

Then use MARSNAV to generate navigation solutions, and then one of the
mosaic programs:

marsnav <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#inp">inp</A>=files.lis <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A>=mosaic.nav in_tpt=tiepoints.tpt
marsmos <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#inp">inp</A>=files.lis <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A>=mosaic.img <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#navtable">navtable</A>=mosaic.nav

Note: there are two tiepoint file formats; "old" is the text-based list,
while "xml" is an XML-based <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#format">format</A>.  The FORMAT parameter controls which
one to use.  Over time "old" should be phased <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A> and eventually the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#format">FORMAT</A>
parameter will disappear.


USAGE:
-----

It is important that all images be connected to each other via tiepoints.
If an image or block of images is not connected, the entire block can "drift"
as a unit <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A> of alignment during the nav process.  The program will report
single unconnected images, but not blocks of them.  The "inertia" parameter
to MARSNAV can help compensate for this.

The program depends on having some initial pointing parameters in the
images, so that overlaps can be detected and tiepoints found... even though
the purpose of the program is to gather tiepoints to *correct* the pointing!
So the initial pointings (usually telemetered with the image) must be at
least somewhat close for the program to work.

The parameters likely need to be tuned; there is not yet enough experience
to say definitively what they should be.

There are many window sizes in this program:  <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#template">TEMPLATE</A>, <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">SEARCH</A>, <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_min">SEARCH_MIN</A>,
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_max">SEARCH_MAX</A>, <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#busy_window">BUSY_WINDOW</A>, <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_win">PARAM_WIN</A>.  Each of them can be specified via a
single value, which applies to both line and sample directions.  Or, they
may be specified as a pair: (line,samp), in order to define a rectangular
window.


METHOD:
------

For each input ("left" image):
   Compute a busyness metric
   Define a candidate tiepoint grid
   Get the busyest point in each grid cell
   Filter <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A> points on the rover
   For each higher-numbered input ("right" image):
      Reject pairs that are too far apart
      Project tiepoints from left to right image
      Correlate all tiepoints
      if no tiepoints left
         Use minimum <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window and correlate again
      Filter tiepoints based on correlator parameters
      Geometric scatter of points
      Store pairwise tiepoints
Save all tiepoints

Each step is detailed below, along with relevant parameters that affect
the step.  Note that throughout, for convenience, the first image of a
pair is referred to as "left" and the second as "right".  This is a
historical artifact of the correlator's roots in stereo processing, and
means absolutely nothing in terms of the relative position of the two
images in the mosaic.  The "left" image could very well be on the right.
It just means "left" is the reference, and "right" is the one searched
for matches.


Compute a busyness metric
-------------------------

This is used to determine the most interesting places to correlate on,
i.e. to make sure that there are some features that the correlator can
lock on to.  This also helps to avoid uninteresting areas such as
undifferentiated sand and sky.

The busyness metric is computed by comparing each pixel with its immediate
right and down neighbors (via absolute value of the difference), and
summing that across a window surrounding the pixel.  (algorithm courtesy
of Jean Lorre).

The <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#busy_window">BUSY_WINDOW</A> parameter controls the size of the window over which the
busyness is computed.  As with the other windows, rectangular windows are
possible (line,samp order).  Note that the busyness values are dependent
on the window size (i.e. the larger the window, the higher the busyness
value), so when the window is adjusted, the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#busy">BUSY</A> threshold should also be
adjusted.  The metric is also sensitive to the overall brightness of the
image, and thus the proper threshold may vary per camera or even by mosaic.

Ideally, the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#busy">busy</A> window should be the same size as the correlation <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#template">template</A>
(<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#template">TEMPLATE</A> parameter).  However, the algorithm is currently implemented in
an inefficient manner (sliding sums should be used) and a window the size
of the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#template">template</A> can be prohibitively expensive.


Define a candidate tiepoint grid
--------------------------------

A grid is defined over the image.  Each grid cell will potentially contribute
a single tiepoint.  The extent of the grid is defined by using the hard
borders as returned by PIG (FileModel.getImageBorders), combined with the
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#border">BORDER</A> parameter and half the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#template">template</A> size on all edges (this allows extra
slop for rotating the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#template">template</A>).  The grid spacing is specified by (surprise!)
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#grid_spacing">GRID_SPACING</A>.


Get the busyest point in each grid cell
---------------------------------------

Within each grid cell, the pixel with the highest busyness metric is
determined.  If this value exceeds the busyness threshold (<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#busy">BUSY</A> parameter),
the pixel is saved as a candidate tiepoint.  Note that the busyness
metric is somewhat unstable and thus the threshold may have to be adjusted
(see the computation section above).


Filter <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A> points on the rover
------------------------------

This is an optional step which is enabled via the "DO_MASK" keyword value.
The points are filtered <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A> using a rover filter, which is the same concept
as that used by the MARSFILTER program (the same subroutines are used).
This takes <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A> most of the points that would be on the rover; presumably
any stragglers should be taken <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A> by the parameter filter step.

Note that a different <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#mask">mask</A> file is used than that typically used by
MARSFILTER.  That is because this program really should only use projected
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#mask">mask</A> shapes (ProjectedTriangle); image space masks are unlikely to be
useful and volume-based shapes are not supported (as no XYZ data is available
to this program).  A ProjectedHorizon could be used but probably should not
(especially if the horizon algorithm is ever implemented).

The <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#mask">mask</A> file must be specified via the MASK parameter.  In the future this
file may be automatically loaded via the PIG library from the config directory,
but this is not yet implemented.  Nevertheless, that is a good place to
store the files.

A common use case for MSL is to run MSLFILTER on the input list to get a
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#mask">mask</A> covering the actual articulation states of the rover, and providing that
to MARSAUTOTIE to avoid all points on the rover.


Reject pairs that are too far apart
-----------------------------------

The "pointing" of the cameras (not really, but it's what getCameraOrientation()
returns) for the pair is compared.  If the angle between them is too great,
the pair is rejected as not having any potential overlap.  This is both for
efficiency, and to get around certain issues that sometimes occur with the
camera models (CAHVOR especially) when projecting well off the image.

The allowed separation is specified by <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#sep_angle">SEP_ANGLE</A>.  This could be computed from
the camera FOV, but currently is not.


Project tiepoints from left to right image
------------------------------------------

Each potential tiepoint from the left image is projected onto the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#surface">surface</A>
model, and then back-projected into the right image (a la the mosaic programs,
like MARSMAP).  This gives an initial tiepoint position on the right side
using the camera models.

Note that the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#surface">surface</A> model is used for this step.  If the surface model is
significantly wrong (or for that matter, if the pointing is too poor), the
projection may be far enough off that the correlator can't find a match.  This
problem has not been observed in testing yet, but if it is, a multipass
approach could in principle be used, with MARSNAV generating an initial
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#surface">surface</A> (and pointing), then submitting those to another run of MARSAUTOTIE.
The <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#surface">surface</A> model is also used for the rover filtering, but not by any other
part of this program.

The projected tiepoint is checked to make sure it is within the right image.
Potentially a "slop" factor could be added here (to allow the point to be
slightly off the edge, for really bad pointing) but that is not implemented.

In addition to projecting the point itself, a second point, a few pixels
over horizontally, is projected as well.  This is used to determine the
nominal frame rotation angle and scale between the images at that point
(the angle changes throughout the image).  The angle and scale are used by
the correlator as an initial condition; see below.


Correlate all tiepoints
-----------------------

Each tiepoint is then correlated to find its match.  This is a multi-stage
process.  Fundamentally, a patch surrounding the point on the left image
(<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#template">TEMPLATE</A> specifies the window size) is used to look for a matching area on
the right within a <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window, which is centered on the projected right
side of the tiepoint as an initial location (possibly modified by edge
effects).  The <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window is dynamically adjusted, as described below,
but starts off at a size specified by <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">SEARCH</A> (or <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_min">SEARCH_MIN</A>, if this process
is repeated).

The first step is to do a linear correlation (GRUEN mode 0).  This allows a
match to be found quickly over a large <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> area.  The results are then
refined using amoeba8 (GRUEN mode 7).

For the linear correlation, the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#template">template</A> is rotated and scaled by the frame
rotation and scale factor computed during projection.  This effectively
removes the rotation and scale difference, which greatly improves match success.

The <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window is then determined.  Nominally this is centered over the
projected right-side tiepoint.  However, if the tiepoint is too close to
the edge, the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window is truncated to the edge.  For example, if the
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window is 101 pixels, a projected pixel right on the edge would be
allowed, extending half the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> (50 pixels) on one side, and 0 on the
other.  This allows large <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> windows to still find points close to the
edge.  There is a limit to this however; the projected pixel must be at
least half of <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_min">SEARCH_MIN</A> away from the edge of the image or the point is
rejected.

A linear correlation is then performed.  The resulting <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#quality">quality</A> must meet or
exceed <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#linear_quality">LINEAR_QUALITY</A> or the point is rejected.  It is generally a good idea
to have a lower <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#quality">quality</A> setting for the linear case than for the amoeba case,
to handle cases like the frame rotation being inaccurate.

The correlation is then run again using the amoeba8 (8 degrees-of-freedom)
mode.  However, the correlation uses the *original* <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#template">template</A>, not the
rotated/scaled one.  The initial conditions for gruen are set to incorporate
the rotation angle and scale factor, as well as the location of the match as
returned by the linear step.  Using the original, unrotated <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#template">template</A> reduces
interpolation noise and gives GRUEN more flexibility to refine the angle.

The resulting correlation <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#quality">quality</A> must meet or exceed QUALTIY, or the point
is rejected.

The final transform terms - all 8 of them - are saved for later use in the
parameter filtering step.  However, the nominal rotation and scale are backed
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A> from these parameters, in order to make the filtering easier.

Finally, the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window is dynamically adjusted.  This has no effect on
the tiepoint just determined, but is used for the next tiepoint (tiepoints
are processed in order according to the grid, which generally marches from
top to bottom of the image).  The dynamic adjustment allows for a wide <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A>
area in cases where it is needed (such as when the projection is way off),
but still keeps the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> size under control to some extent (which greatly
improves efficiency, and helps to reduce false matches).

The dynamic tuning is controlled by the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_edge">search_edge</A> parameter.  The delta
position is computed by subtracting the final correlated location on the
right side from the initial position.  This is then compared to the size of
the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window (really, the search minus <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#template">template</A>, divided by two - the
true "wiggle room" for <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#template">template</A> placement).  If this position is "close" to
zero (meaning the predicted position was accurate), the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window is
decreased.  If the position is "close" to the edge of the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> area, then
the window is increased.  "Close" is defined via the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_edge">SEARCH_EDGE</A> parameter.
If the value is 0.3, then "close" means 30% of the total wiggle room on either
side.

If the window needs to be adjusted, then it is multiplied (to increase), or
divided (to decrease) by <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_factor">SEARCH_FACTOR</A>.  <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_min">SEARCH_MIN</A> and <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_max">SEARCH_MAX</A> are used
to constrain the window size.

Note that this process happens independently in both directions (horizontal
and vertical).  It is quite possible to increase one dimension while decreasing
the other.


if no tiepoints left
 Use minimum <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window and correlate again
----------------------------------------------

If after the correlation process there are no tiepoints left, it is possible
that the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window was too big for the overlap.  In that case, the
projection and correlation steps are run again, using <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_min">SEARCH_MIN</A> as the
initial <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window size rather than SEARCH.

It may be that this step is now unnecessary, since the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window shaping
and dynamic adjustment were added.  That would however require some additional
analysis to prove, which is not worthwhile as of this writing.


Filter tiepoints based on correlator parameters
-----------------------------------------------

This step is really the heart of the program.  The idea is to throw <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A>
outlier tiepoints - those whose projection parameters are statistically
dissimilar to the neighboring points.  This helps to reject bad correlations
(such as horizon mismatches or shadows that move), as well as tiepoints that
are significantly off the general trend (such as on top of a large rock, or
a stray point on the rover itself).  Experience tiepointing MER images shows
that points that are off the general trend should be avoided, as the reason
they are off the trend is usually due to uncorrectable parallax.  Correcting
the trend is much more profitable, and minimizes seams overall.

Filtering for each tiepoint is accomplished by considering an area around the
tiepoint (in pixel space), defined by <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_win">PARAM_WIN</A>, and finding all the active
tiepoints within that region.  The mean and standard deviation of each
transform coefficient are then computed.  These coefficients come straight
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A> of GRUEN, modified by the rotation angle and scale factor as described
above.  They represent the geometric transform (affine plus xy terms) needed
to make the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#template">template</A> match the right side.

If there are insufficient other tiepoints available to compute meaningful
statistics (the minimum is currently hardcoded as 3), the point is rejected.

Finally, the values for each coefficient are compared against the statistics.
For the mean, if the difference is greater than that specified by <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_abs">PARAM_ABS</A>,
the point is rejected.  Standard deviation is a bit more complicated.  If the
computed standard deviation is too small (less than <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_min">PARAM_MIN</A>), then the
point is accepted (this avoids rejecting points when most everything is good).
Otherwise, if the difference from the mean is greater than or equal to the
sigma value times <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_sigma">PARAM_SIGMA</A>, then the point is rejected.

In other words, we accept variances from the mean up to <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_sigma">PARAM_SIGMA</A> standard
deviations, unless the computed stdev is too small to bother with.  And the
variance must also be within an absolute limit.

When computing statistics, we consider all points that were active at the
time the filtering started, i.e. we include points that are rejected, when
computing statistics for later points.  While this sounds odd at first, it
helps solve two problems.  First, when the correlations are questionable and
many are being rejected, it is quite possible to run <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A> of points with which
to do statistics at the bottom of the image (because everything above has been
rejected).  Even if they don't run <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A>, the statistics get skewed towards the
bottom tiepoints, which would end up almost always being accepted.  Second,
it helps with the bimodal problem.  When there are two populations, as often
occurs with the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#ground">ground</A> and rover deck, then the first population could be
completely filtered <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A>, leaving the second unmolested.  Since the second
is typically not what we want (being on the rover deck), considering all the
points helps to reject them.  (the rover <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#mask">mask</A> is not perfect, after all).

Properly tuning the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_win">PARAM_WIN</A>, <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_sigma">PARAM_SIGMA</A>, <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_min">PARAM_MIN</A>, and <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_abs">PARAM_ABS</A>
parameters has to be one of the hardest and most tedious parts of using
this program.  More experience must be gained before a good parameter set
that applies to many cases can be determined.  To give a starting point,
initial tests have shown the following parameters to work for the MER
Spirit Pancam:

<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_sigma">PARAM_SIGMA</A>=\( 1.0, 1.0, 1.2, 1.0, 1.0, 1.0, 1.2, 1.0 \)
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_min">PARAM_MIN</A>=\( .076, .030, 1.0, .01, .030, .076, 1.0, .01 \)
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_win">PARAM_WIN</A>=500

And the following worked for the MER Spirit Navcam:

<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_sigma">PARAM_SIGMA</A>=\( 1.5, 1.5, 1.2, 1.0, 1.5, 1.5, 1.2, 1.0 \)
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_min">PARAM_MIN</A>=\( .076, .030, 1.0, .01, .030, .076, 1.0, .01 \)
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_win">PARAM_WIN</A>=\( 150, 300 \)


Geometric scatter of points
---------------------------

The final significant step is to take the set of tiepoints determined above,
and pare them down for use in MARSNAV.  MER experience shows that 3-4 tiepoints
per edge works reasonably well.  Tiepoints should be as close as possible to
the edge of the image that is on top in the mosaic (first in the image list),
and they should be well separated from each other.  This is achieved by
selecting a few tiepoints to survive <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A> of the results of all of the above.

It is assumed by this point that all surviving tiepoints are "good", in that
any of them could profitably be used.  Thus, the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#quality">quality</A> of the points is not
considered; only their location within the (left) image is.  Note that by
virtue of how the loops work, the left image will always be the one first in
the list, and thus the one on top in the mosaic.

The first thing to determine is how many tiepoints to keep.  This is computed
by determining the min and max extents of the bounding box surrounding all
tiepoints.  The diagonal distance across this box is then computed, as a
rough estimate of how long the "line" of tiepoints is that covers the overlap
area.  The <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#density">DENSITY</A> parameter is then used to compute the number of tiepoints,
by dividing it into the overlap length.  Thus if the tiepoints extend all along
an edge-to-edge overlap, many more will be selected than if the tiepoints are
all concentrated in one area, or if it is a corner overlap.  Note that a
minimum of one tiepoint is kept, regardless.  The kept tiepoints are referred
to below as "candidates".

Next, the geometric center of all the tiepoints is computed (just by averaging
their line and sample coordinates).  We find the tiepoint closest to the
center, which is used to initialize all of the candidates.

We then loop over each candidate, looking to find the best tiepoint to replace
it with.  Each tiepoint is then considered, by calculating its distance from
all other candidates, and find the one that is farthest away from all the other
candidates.  We overemphasize close distances to make sure things spread <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A>.
So instead of computing max(sum(sqrt(d2))), we do min(sum(1/d2)) (where d2 is
the Cartesian distance, squared).  We also include a factor weighting the
distance away from the center of the image (this ensures our points hug the
edge).  This weighting is controlled by <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#center_weight">CENTER_WEIGHT</A>, and is computed as
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#center_weight">CENTER_WEIGHT</A>/d2.  Basically a value of 5 for CENTER_WEIGHT means that there
are 5 virtual tiepoints at the center of the image, repelling all other
tiepoints.

The tiepoint that is farthest away from the others is chosen as the new value
for that candidate slot, and the next slot is computed in the same way.

This entire process iterates until it converges (no more candidate slots
change), or <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#max_iter">MAX_ITER</A> is exceeded (at which point, whatever is in the candidate
slots is kept).


Saving tiepoints
----------------

The survivors from the geometric scatter process are stored away as the
tiepoints for that pair.  After all pairs are considered, the entire set is
written <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A> to the output tiepoint file.


TUNING:
------

Tuning parameters for this program can be tricky.  The <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#debug">DEBUG</A> parameter can
be of assistance here.  Set it to a number between 0 and 3 to control the
amount of information printed <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A>.

0 = no <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#debug">debug</A>.  There is still a fair amount of information printed <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A>
to the log.

1 = Print info about dynamic <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window adjustment, and the culling
(geometric scatter) process.

2 = Everything from 1, plus info about the tiepoints and parameter filtering.
This is probably the most useful.  Each putative tiepoint is printed <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out">out</A>,
along with its transform parameters.  During the filtering step, the statistics
for each tiepoint is also printed, along with a code at the end saying why it
was rejected (e.g. R6 for Relative (sigma) on parameter 6, or A2 for Absolute
on parameter 2).  A summary of the number of points rejected for each reason
is also printed for each image pair.

3 = Everything from 2, plus temporary images are saved throughout the process
showing the locations of surviving tiepoints at several steps.  This should
only be used with one or two pairs, as a LOT of images end up being saved.
One of the images is the busyness image, which can help in setting the busyness
threshold.  The images all start with "tmp".  Identifying which is which is
beyond the scope of this help; look at the source code.  However, there are
images indicating the initial points with rotation, projected points,
correlated points before filtering, and after filtering, usually on both the
left and right images.


Multiple Image Resolutions
--------------------------

Marsautotie can handle inputs at different resolutions.  For example, thumbnail
images, or combinations like Mastcam-100, Mastcam-34, and Navcam (MSL).
However, there are a few considerations when mixing images.

The program will automatically detect the scale difference (as well as rotation)
and apply that as initial conditions when doing correlation, as described
above.  However, there are limits to this.  For example, if the scale
difference was a factor of 8, and the correlation window was 9 pixels, there
wouldn't be much left to correlate.  Conversely, if the scaling happens the
other direction, the correlation window might be 72 pixels (with a corresponding
performance hit).  This should be taken into account when setting the
parameters.  One way to mitigate that somewhat is to take advantage of the
natural ordering in marsautotie; the "left" image will be the one closer to
the front of the list while the "right" one is at the back.  The left image
is the one that is scaled and rotated.

The <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#grid_spacing">GRID_SPACING</A> and <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#density">DENSITY</A> parameters are measured in pixels, but naturally
relate to the image as a whole.  Therefore when presented with different
resolution images, the spacing and <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#density">density</A> may not be optimal.  That is the
purpose of the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#nominal_height">NOMINAL_HEIGHT</A> parameter: the grid spacing and <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#density">density</A> are
scaled by the ratio of the nominal height to the actual height of each image.
So if you set a grid spacing such that you'd get 10 grid points across an image,
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#nominal_height">NOMINAL_HEIGHT</A> will ensure you'll get 10 points across the thumbnail as well,
even though they'll be much closer together.  An open question is whether this
nominal height ratio should be applied to other pixel-dimensioned quantities,
such as correlation size (see discussion in previous paragraph).

Finally, it is sometimes the case that the difference in resolution is too
great for the linear correlator to deal with, even with the compensations
described above.  The second-stage (2-D) correlator is much more equipped to
handle these differences.  In this case it could be helpful to set the linear
correlation <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#quality">quality</A> threshold (<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#linear_quality">LINEAR_QUALITY</A>) very low (0 effectively disables
it), passing all points through to the 2-D correlator.

<A NAME="examples">EXAMPLES:</A>
--------

MER Spirit pancam:

$MARSLIB/marsautotie mcmurdo_ilf_L2.lis mcmurdo_ilf_L2.tie grid_sp=15 sep=20 -do_mask <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#mask">mask</A>=MER2_autotie_filter.xml <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_sigma">param_sigma</A>=\( 1.0, 1.0, 1.2, 1.0, 1.0, 1.0, 1.2, 1.0 \)

MER Spirit navcam:

$MARSLIB/marsautotie 2NN755ILFAOCYLC6P0605L000M2.LIS 2NN755ILFAOCYLC6P0605L000M2.tie grid_sp=15 sep=60 -do_mask <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#mask">mask</A>=MER2_autotie_filter.xml <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_win">param_win</A>=\(150,300\) linear_q=0.75 <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#busy">busy</A>=150 <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#density">density</A>=150 templ=15 <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_min">search_min</A>=59 q=.9


Parallel Processing
-------------------
This program has been parallelized using Open MP (OMP), which is built in
to the g++ compiler.

By default the number of threads used equals the number of cores on the machine
where the program is being run.  Each candidate in the correlation loop is
run in parallel.  Unfortunately, the dynamic adjustment of the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window
is fundamentally a serial thing - we adjust it at each tiepoint to affect the
next tiepoint.  And the dynamic adjustment is critical for performance; it
can have a 10x or better impact on runtimes.

After careful consideration, it was realized that the *timing* of the window
adjustment algorithm is not critical - it does not have to strictly affect the
next tiepoint, just future tiepoints, in order to be effective.  Therefore, the
window is adjusted as necessary, but that new window is picked up by the next
iteration to start - existing parallel iterations are not affected.  This works
well from a performance standpoint, but has the unfortunate side-effect of
making the results somewhat non-deterministic, as the tiepoints that are
affected by the update depend on what's been processed already, which is
unpredictable.  Use of dynamic scheduling means that each thread when it's
ready for more work will pick up the next iteration in order, which helps
mitigate the nondeterministic effect somewhat.  Note that you can get
deterministic behavior by setting <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_edge">SEARCH_EDGE</A> to 0, effectively disabling the
window adjustment algorithm, without having to disable OMP.  If you do disable
OMP, the algorithm devolves to the original serial algorithm, and you should
again get deterministic results (although the results may differ from the
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#omp_on">omp_on</A> + <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_edge">search_edge</A>=0 case).

The busyness computation is also parallelized (per line).

Parallel processing can be disabled via the -OMP_OFF keyword.  The number
of threads can be controlled by setting the OMP_NUM_THREADS environment
variable before running the program.  There are numerous other OMP variables
that can be set; see the OMP documentation.  However, the number of threads
is the only one that is likely to be useful in most cases.


TO DO LIST:
----------

* Use moving box for busyness calculation for efficiency.
* Consider using Gary Yagi's horizon <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#mask">mask</A> routines.
* More parameter tuning!!
* Fix rover filter to compensate for CAHVOR bug (see method comments).
* Use PIG to find filter file in the config dir automatically.
* Compute appropriate <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#sep_angle">SEP_ANGLE</A> based on camera FOV.
* Once parameter sets stabilize, perhaps have "sets" you can choose from
  for different cameras (rather than setting dozens of params).
* More adaptable algorithms for parameters... for example, increasing
  window size when there's not enough information to correlate properly.
* Do something more to avoid line problems (e.g. horizon, shadows) where
  the correlation is unconstrained in one direction.
* Add some "slop" for on-image checks when projecting to the right side.
* Determine if the "correlate again using min <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window" step is really
  useful any more, now that the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window shaping and adjustment is done.


HISTORY:
-------

4-30-94  Initial mpfnav by J Lorre. 
Sep. 98  Multimission conversion by B. Deen
July 99  Split of original MARSNAV into two parts:  MARSTIE and MARSNAV
Sep. 06  Wrote MARSAUTOTIE using MARSTIE as a base (rgd)
2013-04-02 rgd	Changes to work with multiple resolution inputs
2016-10-18 rgd	Parallelization of code

<A NAME="CogProg">COGNIZANT PROGRAMMER:  Bob Deen</A>

</pre>
<hr>
<H2>PARAMETERS:</H2>
<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#inp"><H3>INP</H3></A>
Input image(s) or
file list.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#out"><H3>OUT</H3></A>
Output tiepoint file.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#navtable"><H3>NAVTABLE</H3></A>
Corrected navigation
filename.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#band"><H3>BAND</H3></A>
The vicar image 
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#band">band</A> number. 
Defaults to 1

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#template"><H3>TEMPLATE</H3></A>
correlation size.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search"><H3>SEARCH</H3></A>
correlation <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A>
area.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#quality"><H3>QUALITY</H3></A>
Minimum acceptable
correlation <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#quality">quality</A>.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#border"><H3>BORDER</H3></A>
Pixels to avoid
on picture <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#border">border</A>.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#busy"><H3>BUSY</H3></A>
Threshold for busyness
metric.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#grid_spacing"><H3>GRID_SPACING</H3></A>
Spacing for initial
tiepoint grid.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#sep_angle"><H3>SEP_ANGLE</H3></A>
Max separation angle
for image pairs.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_edge"><H3>SEARCH_EDGE</H3></A>
Dynamic <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window
tuning: how close to edge.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_factor"><H3>SEARCH_FACTOR</H3></A>
Dynamic <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window
tuning: how much to adjust.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_min"><H3>SEARCH_MIN</H3></A>
Minimum <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window size.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search_max"><H3>SEARCH_MAX</H3></A>
Maximum <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#search">search</A> window size.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#busy_window"><H3>BUSY_WINDOW</H3></A>
Size of window for busyness
metric calculation.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#linear_quality"><H3>LINEAR_QUALITY</H3></A>
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#quality">Quality</A> threshold for linear
correlation.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#mask"><H3>MASK</H3></A>
File to use specifying rover
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#mask">mask</A>.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#use_mask"><H3>USE_MASK</H3></A>
Enables use of rover <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#mask">mask</A>.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#density"><H3>DENSITY</H3></A>
Controls how many tiepoints
to keep per pair.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#max_iter"><H3>MAX_ITER</H3></A>
Max iterations for geometric
scatter step.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#center_weight"><H3>CENTER_WEIGHT</H3></A>
Weighting factor for center
of image in geometric scatter.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_win"><H3>PARAM_WIN</H3></A>
Window size for parameter
filtering.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_sigma"><H3>PARAM_SIGMA</H3></A>
Allowed sigma for parameter
filtering.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_min"><H3>PARAM_MIN</H3></A>
Minimum sigma value for
parameter filtering.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#param_abs"><H3>PARAM_ABS</H3></A>
Absolute difference value
for parameter filtering.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#debug"><H3>DEBUG</H3></A>
Flag to enable <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#debug">debug</A>
prints and files.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#start_key"><H3>START_KEY</H3></A>
Starting key number for
tiepoint file (XML <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#format">format</A>
only).

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#format"><H3>FORMAT</H3></A>
OLD or XML tiepoint
file <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#format">format</A>.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#nominal_height"><H3>NOMINAL_HEIGHT</H3></A>
Nominal height of input
images.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#omp_on"><H3>OMP_ON</H3></A>
Turns on or off parallel
processing (default: on)

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#normal"><H3>NORMAL</H3></A>
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#surface">Surface</A> <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#normal">normal</A> vector.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#ground"><H3>GROUND</H3></A>
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#surface">Surface</A> <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#ground">ground</A> point.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#surf_coord"><H3>SURF_COORD</H3></A>
Coordinate system used to define
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#surface">surface</A> parameters.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#surface"><H3>SURFACE</H3></A>
The type of mars
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#surface">surface</A> to use.
INFINITY, PLANE, SPHERE1, SPHERE2.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#config_path"><H3>CONFIG_PATH</H3></A>
Path used to find
configuration/calibration
files.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#point_method"><H3>POINT_METHOD</H3></A>
Specifies a mission-
specific pointing
method to use

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#match_method"><H3>MATCH_METHOD</H3></A>
Specifies a method
for pointing corrections.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#match_tol"><H3>MATCH_TOL</H3></A>
Tolerance value for
matching pointing params
in pointing corrections file.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#nosite"><H3>NOSITE</H3></A>
Disables coordinate
system sites.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#rsf"><H3>RSF</H3></A>
Rover State File(s) to use.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#debug_rsf"><H3>DEBUG_RSF</H3></A>
Turns on debugging of <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#rsf">RSF</A>
parameter.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#coord"><H3>COORD</H3></A>
Coordinate system to use.
Ignored by marstie.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#coord_index"><H3>COORD_INDEX</H3></A>
Coordinate system index for
some <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#coord">COORD</A>/mission combos.
Ignored by marstie.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie_level2.html#fixed_site"><H3>FIXED_SITE</H3></A>
Which site is FIXED for
rover missions.

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie.html#examples"><H4>See Examples:</H4></A>
<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsautotie.html#CogProg"><H4>Cognizant Programmer:</H4></A>
</BODY>
</HTML>
