<HTML>
<HEAD><title>HTML Level 2 Help for MARSCOR3</title></HEAD>
<BODY>
<H1>Level 2 Help for <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3.html">MARSCOR3</A></H1>
<A NAME="inp"><H3>INP</H3></A>
<pre>
First left eye image, then right eye image.

There is nothing actually requiring left/right order, other than convention.
If left/right is unclear (e.g. the images are not from a stereo camera) then
either order is acceptable.  If the output is used with MARSXYZ, the same
order must be used.  The order must also match that of the program used to
calculate input disparities (typically MARSJPLSTEREO).

<p>
<p></pre>


<hr>
<A NAME="out"><H3>OUT</H3></A><pre>
The line and sample disparity files.  If one filename is given, a two-banded
file is created with line disparity as <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#band">band</A> 1 and sample disparity as band 2.
If two filenames are given, two single-<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#band">band</A> files are created.  Line disparity
is in file 1, and sample disparity is in file 2.

See the main program help for output file contents and formatting.

<p>
<p></pre>


<hr>
<A NAME="in_disp"><H3>IN_DISP</H3></A><pre>
The input disparity images.  If one filename is given, a two-banded file
is expected with line disparity as <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#band">band</A> 1 and sample disparity as band 2.
If two filenames are given, the first file is expected to contain line
disparities and the second, sample disparities.

The size of the disparity image compared with the input images must be
related as specified by the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#disp_pyramid">DISP_PYRAMID</A> parameter.

See the main program help for output file contents and formatting.

<p>
<p></pre>


<hr>
<A NAME="mask"><H3>MASK</H3></A><pre>
Optional output file showing the coverage of tiepoints (correlated pixels),
in BYTE format.
 0 dn means the pixel could not be reached in order to be correlated.
   (i.e. the input file had no disparity for the pixel).
 128 dn means a correlation was successfully performed at this location.
 255 dn means a correlation was attempted at this location but it failed,
   usually because of low correlation <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">quality</A>.

<p>
<p></pre>


<hr>
<A NAME="out_quality"><H3>OUT_QUALITY</H3></A><pre>
Output <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">quality</A> file (optional): A REAL image containing the correlation
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">quality</A> of each pixel attempted, from 0 to 1.  0 indicates either a
correlation failure unrelated to the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">QUALITY</A> setting, or a pixel that was
not available in the input.

This file could be used in conjunction with a very low <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">quality</A> setting
to allow correlation in low-<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">quality</A> areas, with the result filtered
afterwards using a higher <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">quality</A> (i.e. use the output quality file as
a <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#mask">mask</A>).  Unlike marscorr/marscor2, this is a reasonably safe operation,
as long as no gore passes were performed.  Gore passes, however, run the
same risk as marscorr/marscor2: if there is any kind of repeating pattern
in the image, the correlator could get "stuck" on the wrong match for the
pattern and propogate that error.

<p>
<p></pre>


<hr>
<A NAME="in_coefs"><H3>IN_COEFS</H3></A><pre>
The <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#in_coefs">IN_COEFS</A> parameter allows the user to directly specify the transform on
a per-pixel basis.  The input file should be a 6-<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#band">band</A> file the same size
as the input disparity file, containing the parameters a,b,d,e,g,h.  Note
that the translation terms, c and f, are not included because they come from
the input disparity file.  Note that OUT_COEF can be used to save the
final coefficients, in the same file format.

<p>
<p></pre>


<hr>
<A NAME="out_coefs"><H3>OUT_COEFS</H3></A><pre>
The <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#out_coefs">OUT_COEFS</A> parameter specifies an optional file to contain the output
coefficients from the transform.  This will be a 6-<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#band">band</A> file the same size
as the output disparity file, containing the parameters a,b,d,e,g,h.  Note
that the translation terms, c and f, are not included because they are in
the output disparity file.  Note that <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#in_coefs">IN_COEFS</A> uses the same file format.

<p>
<p></pre>


<hr>
<A NAME="band"><H3>BAND</H3></A><pre>
The vicar image <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#band">band</A> number for the input images.  Defaults to 1

<p>
<p></pre>


<hr>
<A NAME="template"><H3>TEMPLATE</H3></A><pre>
Correlation size.  Must be an odd number.  Defaults to 15 square.

If only one value is given, a square <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#template">template</A> is used.  If two values are
given, the first is the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#template">template</A> height (line direction) and the second is
the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#template">template</A> width (sample direction).  Rectangular templates that are
wider than they are tall should be useful for lander images.

<p>
<p></pre>


<hr>
<A NAME="search"><H3>SEARCH</H3></A><pre>
Correlation <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#search">search</A> area.  Must be an odd number.  Defaults to 35 square.
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#search">SEARCH</A> must be &gt <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#template">TEMPLATE</A>.  If SEARCH is only a bit larger than TEMPLATE
then many correlations will abort because they will be prohibited from
searching in promising directions. 

If only one value is given, a square <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#search">search</A> area is used.  If two values are
given, the first is the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#search">search</A> height (line direction) and the second is
the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#search">search</A> width (sample direction).  Rectangular search areas that are
wider than they are tall should be useful for lander images.

<p>
<p></pre>


<hr>
<A NAME="quality"><H3>QUALITY</H3></A><pre>
Minimum acceptable correlation <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">quality</A>.  Correlations with qualities below
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">QUALITY</A> will be rejected. Qualities range from 0 (poor) to 1 (excellent).

Note that this value is the square of the correlation coefficient.  The
definition of correlation coefficient is a/sqrt(b); we maximize a**2/b
instead to avoid the square root calculation (negative correlations are
checked for and given a negative result).  Therefore if a <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">quality</A> value of
(for example) 0.36 is given, that corresponds to a correlation coefficient
of 0.6.  The difference does not matter except insofar as people are used
to using the correlation coefficient number.

Defaults to 0.6  

<p>
<p></pre>


<hr>
<A NAME="gores"><H3>GORES</H3></A><pre>
Specifies whether or not gore passes are performed.  The default is not to
do them.  See the main help for details.

<p>
<p></pre>


<hr>
<A NAME="gore_passes"><H3>GORE_PASSES</H3></A><pre>
Specifies the maximum number of gore passes through the image to perform.
If the value is 0, the number of passes is unlimited.  The program will
stop making gore passes once a pass produces no more tiepoints, even if
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#gore_passes">GORE_PASSES</A> has not yet been reached.

Limiting the number of gore passes prevents the correlator from "breaking
in" to invalid areas and getting "lost", such as often happens with
marscorr/marscor2.  Similar limiting may also be done via a high
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#gore_quality">GORE_QUALITY</A>.

<p>
<p></pre>


<hr>
<A NAME="gore_quality"><H3>GORE_QUALITY</H3></A><pre>
Specifies the correlation <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">quality</A> to be used during gore passes.  If not
specified, the value for <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">QUALITY</A> is used.

Usually, a reasonably low <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">quality</A>, such as 0.36, is acceptable for the main
correlation.  This is because we know a priori that all points considered
have passed the first correlation program, which acts as a kind of <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#filter">filter</A>.
So it is quite likely that the point is good, even with a lower <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">quality</A>.

However, in gore filling, that <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#filter">filter</A> no longer applies.  Any point could
be considered for correlation.  By setting <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#gore_quality">GORE_QUALITY</A> quite high (perhaps
.6 OR .8), WE INSURE THAT ONLY VERY GOOD POINTS ARE INCLUDED WITHOUT THE
benefit of the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#filter">filter</A>.  This prevents the correlator from getting "lost"
such as often happens with marscorr/marscor2 and generating spurious results.
Points not filled in by the first correlator may still be good for marscor3,
since the first correlator usually does only a square mapping, not a
quadrilateral mapping, from left to right, and square doesn't always work
very well.

This value is the square of the correlation coefficient, as with <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">QUALITY</A>.

<p>
<p></pre>


<hr>
<A NAME="gore_reverse"><H3>GORE_REVERSE</H3></A><pre>
Normally, gore passes are processed top-to-bottom, left-to-right.  As
each pixel is filled in, it becomes eligible to be a neighbor to the next
pixel.  So a gore pass can fill in arbitrarily far to the right or down,
but can only fill in one pixel to the left or up.  This often leads to
diagonal edges in coverage (moving down and to the left), as each successive
line is only able to move one pixel farther left.  Filling much up/left
requires a huge number of gore passes.

Turning on <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#gore_reverse">GORE_REVERSE</A> enables a second iteration through the data in each
gore pass.  This second iteration processes in the reverse order... bottom-
to-top, right-to-left.  This allows it to fill in up and to the left as well
as down/right.  Note that one gore pass consists of going *both* directions.

The reverse pass can leave diagonal coverage edges moving up and to the right.
If 0 degrees is to the right and angles increase counterclockwise, then the
areas between 0 and 45 degrees, and between 180 and 225 degrees, will not be
filled by a single gore pass.  (Without reverse, the unfilled area is 0 to 225).
For this reason, it is recommended that at least two gore passes be used if
reverse is turned on.

<p>
<p></pre>


<hr>
<A NAME="disp_pyramid"><H3>DISP_PYRAMID</H3></A><pre>
Specifies the "pyramid level" of the input disparities.  The input is zoomed
down by a factor of 2 ^ <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#disp_pyramid">DISP_PYRAMID</A>.  This corresponds directly to the
PYRLEVEL parameter to MARSJPLSTEREO.

A value of 1, 2, or 3 is generally recommended.  Pyramids of 0 (no zoom) are
often susceptible to minor variations in the camera model and sometimes
produce sparse images <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#out">out</A> of MARSJPLSTEREO.  Higher pyramid levels are less
sensitive to the accuracy of the camera model and generally produce better
coverage.

See the main help for a discussion of the input file format and how it
relates to <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#disp_pyramid">DISP_PYRAMID</A>.

<p>
<p></pre>


<hr>
<A NAME="stop_pyramid"><H3>STOP_PYRAMID</H3></A><pre>
The <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#stop_pyramid">STOP_PYRAMID</A> parameter can be used in conjunction with <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#disp_pyramid">DISP_PYRAMID</A> and
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#multipass">MULTIPASS</A> to stop the pyramid process prematurely.  Normally <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#stop_pyramid">STOP_PYRAMID</A>
is 0, meaning go all the way to full-res.  But if <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#stop_pyramid">STOP_PYRAMID</A> is non-0,
the process stops there.  A value of 1 would produce a half-scale output,
2 would produce quarter-scale, etc.  At least one pass is done regardless
of <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#stop_pyramid">STOP_PYRAMID</A>.  The intent of this is to facilitate debugging by being
able to examine the intermediate pyramid results; operational use is not
anticipated.  Note that the output can be fed back into another run of
marscor3 by adjusting <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#disp_pyramid">DISP_PYRAMID</A> to the prior <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#stop_pyramid">STOP_PYRAMID</A> value.

<p>
<p></pre>


<hr>
<A NAME="mode"><H3>MODE</H3></A><pre>
Specifies which <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#mode">mode</A> of the gruen correlator to use.

All correlations are performed using the gruen correlation routine.  See
the gruen documentation for details of the algorithm.

The <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#mode">MODE</A> parameter is fully described in the main program help.  Only the
five "amoeba*" modes are recommended.

<p>
<p></pre>


<hr>
<A NAME="linear"><H3>LINEAR</H3></A><pre>
Adds <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#linear">linear</A> <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#search">search</A> to any <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#mode">MODE</A>.  This can help when the initial point is more
than a pixel or two away from the true point, since the various amoeba modes
don't generally like walking more than that in the parameter space.  However,
the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#linear">linear</A> <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#mode">mode</A> is limited to a square transform, so it may not match the
cemra geometry very well.  See the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#mode">MODE</A> parameter and description in the
main program help.

<p>
<p></pre>


<hr>
<A NAME="ftol"><H3>FTOL</H3></A><pre>
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#ftol">FTOL</A> specifies the tolerance, or accuracy, in the function minimization
process (the correlation <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">quality</A>).  While directly related to accuracy of
the results, this relationship is not simple.  See the main help for a
more involved discussion.

Higher values of <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#ftol">FTOL</A> cause the program to run faster, sometimes MUCH faster,
at the expense of some accuracy.

Typical values range from .000001 (historically the only value; probably too
tight a tolerance) to .001 or .004.  This parameter should be experimented
with for each new type of data.

<p>
<p></pre>


<hr>
<A NAME="check"><H3>CHECK</H3></A><pre>
If non-zero, turns on reverse-<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#check">check</A> <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#mode">mode</A>.  After every point is correlated
(whether in the main or gore passes), the pixel is again correlated in
reverse.  Instead of left-to-right, it goes right-to-left (right is the
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#template">template</A>) using the current result as the starting point.  Thus a left-side
coordinate is obtained that matches the right-side image.

This coordinate is then compared to the original left-side coordinate.  If
they differ by more than <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#check">CHECK</A> pixels, the point is rejected.  (This is a
square window; line and sample are compared independently).

The result is that more "bad" pixels are filtered <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#out">out</A>, at the expense of
some time.  This may allow the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">quality</A> to be lowered without getting too
many bad matches.

Note that <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#check">CHECK</A> should not be run with <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#decileft">DECILEFT</A> or <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#rotation">ROTATION</A> or X/<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#yscale">YSCALE</A>
as the inverse affine transformation is not fully implemented yet.

See also <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#check_quality">CHECK_QUALITY</A>; the reverse <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#check">check</A> is omitted if the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">quality</A> is
higher than <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#check_quality">CHECK_QUALITY</A>.

Note that <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#check">CHECK</A> is not all that useful in the amoeba-only modes, because
we start at a known peak already.  The reverse <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#check">check</A> could be more useful
when combined with a -<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#linear">LINEAR</A> <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#search">search</A>.  A true reverse <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#check">check</A> would do an
independent, complete right-&gtleft correlation, then compare the results.

<p>
<p></pre>


<hr>
<A NAME="check_quality"><H3>CHECK_QUALITY</H3></A><pre>
Minimum threshhold at which the reverse <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#check">check</A> is performed.  The theory
is, if the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">quality</A> is good enough, a reverse <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#check">check</A> is unnecessary.  See
the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#check">CHECK</A> parameter.

<p>
<p></pre>


<hr>
<A NAME="multipass"><H3>MULTIPASS</H3></A><pre>
If the pyramid value is more than 1, then it is quite likely that the
initial point obtained from the input disparity is off by more than amoeba
can handle, giving very "patchy" results.  The amoeba algorithm really
needs to start within a pixel or so for reliable results.

To handle this case, <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#multipass">MULTIPASS</A> may be specified.  If MULTIPASS is turned on
and <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#disp_pyramid">DISP_PYRAMID</A> is greater than 1, then the entire correlation process is
repeated multiple times.  At each iteration, the input image is downsampled
so it is twice the size of the input correlation map, for an effective
pyramid level of 1.  The result then becomes the input disparity map for
the next iteration.

So, for example, with <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#multipass">MULTIPASS</A> and <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#disp_pyramid">DISP_PYRAMID</A>=3, then input disparity
map is 1/8 the size of the input.  The first correlation is performed with
a 1/4 scale image pair (the full correlation, including gore passes).
The resulting 1/4 scale disparity is then correlated with a 1/2 scale image,
then the result of that is correlated with the full scale image to produce
the final result.

The default is not to do multiple passes.

<p>
<p></pre>


<hr>
<A NAME="filter"><H3>FILTER</H3></A><pre>
Turns on a pre-correlation low-pass <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#filter">filter</A> of the images.  This can tend
to reduce interpolation noise; see <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#quality">Quality</A> of Results Discussion in the
main help.

Note that the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#filter">filter</A> is applied only to the full-res image.  If -<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#multipass">MULTIPASS</A>
is also used, only the last pass is filtered.  (Downsampling does an inherent
filtering so it is not needed).

The specific <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#filter">filter</A> used is simply an NxN average of surrounding pixels,
with N given by <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#filter_size">FILTER_SIZE</A>.  So with FILTER_SIZE=3, the 9 surrounding pixels
(including the central pixel) are averaged.

<p>
<p></pre>


<hr>
<A NAME="filter_size"><H3>FILTER_SIZE</H3></A><pre>
Specifies the size of the averaging window for -<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#filter">FILTER</A>.  Must be an odd
number.  See -<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#filter">FILTER</A>.

If one value is given, it applies to both the left and right inputs.  If
two values are given, the first applies to the left and the second to the
right.  This allows differential filtering levels, for use e.g. when
correlating different-scale images (such as the MSL mastcams).

<p>
<p></pre>


<hr>
<A NAME="pi_source"><H3>PI_SOURCE</H3></A><pre>
Specifies where the primary input labels come from.  The default is
PI_FROM_DISP, meaning that the labels are transferred from the (first)
disparity input.  This preserves the history labels that the 1-D correlator
added.  However, it presumes that the 1-D correlator itself transferred
labels from the input images.

In the uncommon case of a disparity file where the labels are insufficient,
PI_FROM_INP can be used.  This causes the label to be transferred from the
first <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#inp">INP</A> parameter.  This might be necessary if e.g. a synthetic disparity
map were created which did not have all the labels of the input.

<p>
<p></pre>


<hr>
<A NAME="rotation"><H3>ROTATION</H3></A><pre>
Specifies the overall frame <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#rotation">rotation</A> (in degrees) between the two images.
A positive value says the right image should be rotated clockwise by that
amount in order to match the left.

This is not normally needed for standard stereo pairs.  However, for repointed
pairs, or arm-camera pairs, this can significantly improve amoeba's results.
The solution is more stable because amoeba is less likely to go off in bad
directions looking for the proper transform, especially when the correlations
are marginal due to noise.

<p>
<p></pre>


<hr>
<A NAME="xscale"><H3>XSCALE</H3></A><pre>
Similar to <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#rotation">ROTATION</A>, but specifies the overall X-direction scaling factor
between the images.  This factor applied to the right image should produce
an image closely matching the left image's scale.

See <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#rotation">ROTATION</A> or the main help for more.

<p>
<p></pre>


<hr>
<A NAME="yscale"><H3>YSCALE</H3></A><pre>
Excactly like <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#xscale">XSCALE</A>, except it applies in the Y direction (line) instead.

<p>
<p></pre>


<hr>
<A NAME="feedback_coefs"><H3>FEEDBACK_COEFS</H3></A><pre>
If <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#feedback_coefs">FEEDBACK_COEFS</A> is on, the perspective transform coefficients are
"remembered" from one pyramid pass to the next.  So for the next stage
of the pyramid, the starting point uses the coefficients derived from the
previous stage.  This helps retain the "shape" of the correlation window
mapping across pyramid levels.

<p>
<p></pre>


<hr>
<A NAME="rot_range"><H3>ROT_RANGE</H3></A><pre>
Establishes limits for the allowed <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#rotation">rotation</A> values.  This is accomplished
by setting limits on the transform coefficients based on the range input,
so it is not a perfect limit (see discussion in main help).  If <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#scale_range">SCALE_RANGE</A>
is given but <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#rot_range">ROT_RANGE</A> is not, ROT_RANGE defaults to -5 to +5 degrees.

<p>
<p></pre>


<hr>
<A NAME="scale_range"><H3>SCALE_RANGE</H3></A><pre>
Establishes limits for the allowed scale.  This is accomplished by setting
limits on the transform coefficients based on the scale input, so it is not
a perfect limit (see discussion in main help).  If <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#rot_range">ROT_RANGE</A> is given but
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#scale_range">SCALE_RANGE</A> is not, SCALE_RANGE defaults to 0.9 to 1.1.

<p>
<p></pre>


<hr>
<A NAME="omp_on"><H3>OMP_ON</H3></A><pre>
Turns on or off parallel processing.  The default is on.  The main help
describes some environment variables that can further control parallel
processing.  Note that this program uses standard OpenMP (which is built in
to the gcc/g++ compilers), so further details can be found in the OpenMP
documentation.

<p>
<p></pre>


<hr>
<A NAME="data_set_name"><H3>DATA_SET_NAME</H3></A><pre>
The <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#data_set_name">DATA_SET_NAME</A> typically identifies the instrument that acquired the
data, the target of that instrument, and the processing level of the data.
This value is copied to the output label, property IDENTIFICATION,
keyword <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#data_set_name">DATA_SET_NAME</A>.

<p>
<p></pre>


<hr>
<A NAME="data_set_id"><H3>DATA_SET_ID</H3></A><pre>
The <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#data_set_id">DATA_SET_ID</A> value for a given data set or product is constructed
according to flight project naming conventions.  In most cases the
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#data_set_id">DATA_SET_ID</A> is an abbreviation of the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#data_set_name">DATA_SET_NAME</A>.
This value is copied to the output label, property IDENTIFICATION,
keyword <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#data_set_id">DATA_SET_ID</A>.

<p>
<p></pre>


<hr>
<A NAME="release_id"><H3>RELEASE_ID</H3></A><pre>
When a data set is released incrementally, such as every three months during
a mission, the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#release_id">RELEASE_ID</A> is updated each time part of the data set is released.
For each mission(or host id if multiple spacecrafts), the first release of a data
set should have a value of "0001".
This value is copied to the output label, property IDENTIFICATION,
keyword <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#release_id">RELEASE_ID</A>.

<p>
<p></pre>


<hr>
<A NAME="product_id"><H3>PRODUCT_ID</H3></A><pre>
Specifies a permanent, unique identifier assigned to a data product by
its producer. Most commonly, it is the filename minus the extension.
This value is copied to the output label, property IDENTIFICATION,
keyword <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#product_id">PRODUCT_ID</A>.

<p>
<p></pre>


<hr>
<A NAME="producer_id"><H3>PRODUCER_ID</H3></A><pre>
Specifies the unique identifier of an entity associated with the
production of a data set. This value is copied to the output label,
property IDENTIFICATION, keyword <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#producer_id">PRODUCER_ID</A>.

<p>
<p></pre>


<hr>
<A NAME="producer_inst"><H3>PRODUCER_INST</H3></A><pre>
Specifies the identity of a university, research center, NASA center or other
institution associated with the production of a data set.
This value is copied to the output label, property IDENTIFICATION, keyword
PRODUCER_INSTITUTION_NAME.

<p>
<p></pre>


<hr>
<A NAME="target_name"><H3>TARGET_NAME</H3></A><pre>
Specifies a target.  The target may be a planet, satelite, ring, region, feature,
asteroid or comet.  This value is copied to the output label, property
IDENTIFICATION, keyword <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#target_name">TARGET_NAME</A>.

<p>
<p></pre>


<hr>
<A NAME="target_type"><H3>TARGET_TYPE</H3></A><pre>
Specifies the type of a named target. This value is copied to the output
label, property IDENTIFICATION, keyword <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#target_name">TARGET_NAME</A>.

<p>
<p></pre>


<hr>
<A NAME="decileft"><H3>DECILEFT</H3></A><pre>
Whether or not to decimate the left <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#template">template</A> image if the difference
of resolution between the left and right images allows it, that is, if
left image resolution is at least twice higher than right image. See main 
program help for more information.

<p>
<p></pre>


<hr>
<A NAME="global_deci"><H3>GLOBAL_DECI</H3></A><pre>
This parameter is used only if <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#decileft">DECILEFT</A> is ON.
If <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#global_deci">GLOBAL_DECI</A>, then a unique factor of left image decimation is defined based 
of <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#rotation">ROTATION</A>, <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#xscale">XSCALE</A> and <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#yscale">YSCALE</A>. This decimation is happening whether or not 
COEFF_IN and/or FEEDBACK is activated. For each correlation pixel, the left 
image is decimated according to the decimation factor inferred from <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#rotation">ROTATION</A>,
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#xscale">XSCALE</A> and <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marscor3_level2.html#yscale">YSCALE</A>, and the affine parameters coefficients are adjusted
accordingly.
If LOCAL_DECI then decimation is decided for each pixel according to the 
affine transform coefficients. This option is only useful if COEFS_IN and/or
FEEDBACK is activated.
In either case, decimation occurs only if there is at least of a resolution
difference of at least 2 (left having 2 times more resolution than right).
<p>
<p></pre>

</BODY>
</HTML>
