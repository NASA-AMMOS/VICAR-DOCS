<HTML>
<HEAD><title>HTML Help for MARSBIAS</title></HEAD>
<BODY>
<H1>Help for MARSBIAS</H1>
<pre>

NOTE
====
THIS PROGRAM IS NOW OBSOLETE.  Please use MARSBRT instead.

PURPOSE:
Computes the mosaic intensity BIAS parameters from the overlap file 
generated by program MARSINT. This file contains the intensity correction
factors required to make images in a mosaic match in intensity.

The bias.txt file can be input to the mars mosaicking programs to
replace the BIAS parameter (only multiplicative).

The script.pdf file is an executable vicar pdf file which can be run
to convert all the images in listoffiles into images in the local
directory. These local images are named p001.img, p002.img etc and
they have been run through marsrad and f2 to correct for brightness.

<A NAME="examples">EXAMPLE:</A>
(For shell vicar only. The final mosaic is generated by the last step)
marsint <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsbias_level2.html#inp">inp</A>=listoffiles <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsbias_level2.html#out">out</A>=\(mosaic.img,overlap.txt\) zoom=.2
marsbias in=\(listoffiles,overlap.txt\) <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsbias_level2.html#out">out</A>=\(bias.txt,script.pdf\)
marsmap <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsbias_level2.html#inp">inp</A>=listoffiles <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsbias_level2.html#out">out</A>=mosaic.img zoom=.1 bias=\(` cat bias.txt`\)
    
METHOD:
Marsbias determines a set of multiplicative or additive constants which,
when applied to the input images, result in minimizing the brightness 
differences between these images in the mosaic. This is normally done by
decalibrating the images and dividing the images by the exposure time. 


Multiplicative:
Minimizes the sums of all combinations of overlap areas taken 2 at a time.
sum(overlaps)sum(pairs) (1-bias(i)*dn(i)/bias(j)*dn(j))

Additive:
Minimizes the sums of all combinations of overlap areas taken 2 at a time.
sum(overlaps)sum(pairs) ((bias(i)+dn(i))-(bias(j)+dn(j)))

Images with no overlaps are assigend a no-op bias (multiplicative of 1.0,
additive of 0.0).

An <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsbias_level2.html#inertia">INERTIA</A> value modifies the cost function by adding in the difference of
the bias from a no-op, times the <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsbias_level2.html#inertia">inertia</A>.  This provides a "stay-in-place"
weighting, causing the solution to preferentially stay near where it started.
Selecting values for this is trial-and-error and it should usually be 0.

HISTORY:
12-10-2003 J Lorre. 
10-2006 (rgd) Added <A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsbias_level2.html#inertia">INERTIA</A>, and no-op bias for unconnected images.

<A NAME="CogProg">COGNIZANT PROGRAMMER:  Bob Deen</A>

</pre>
<hr>
<H2>PARAMETERS:</H2>
<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsbias_level2.html#inp"><H3>INP</H3></A>
1 listoffiles
2 input overlap file

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsbias_level2.html#out"><H3>OUT</H3></A>
1 output bias factors
2 vicar script pdf

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsbias_level2.html#option"><H3>OPTION</H3></A>
1=multiplicative
2=additive

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsbias_level2.html#ftol"><H3>FTOL</H3></A>
Tolerance value for amoeba

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsbias_level2.html#inertia"><H3>INERTIA</H3></A>
<A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsbias_level2.html#inertia">Inertia</A> value

<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsbias.html#examples"><H4>See Examples:</H4></A>
<HR><A HREF="/VICAR-DOCS/vicar/core460/html/vichelp/marsbias.html#CogProg"><H4>Cognizant Programmer:</H4></A>
</BODY>
</HTML>
